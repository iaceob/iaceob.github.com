<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.svg"> <title>生物烯丙菊 - 达文西手电筒 - 第 10 頁</title> <link rel="stylesheet" href="/css/style.css"> </head> <body> <header class="head"> <h1 class="head-title"><a href="/">生物烯丙菊</a></h1> <h3 class="head-description"> <span class="flashlight">达文西手电筒</span> </h3> <ul class="head-nav"> <li><a href="/">Home</a></li> <li><a href="/archives">Archives</a></li> <li><a href="http://blog.3u3.me">幾文山</a></li> </ul> </header> <main class="main"> <article class="post"> <header class="post-head"> <time datetime="2013-10-22T15:53:17.000Z">October 22, 2013</time> <h1><a href="/post/mysql-create-database-set-character/">mysql 建库设置字符集</a></h1> </header> <section class="post-main"><p>不可否认。。。在ubuntu下，乱码出现的频率变得大多了。。。。</p> <p> </p> <p>创建库的时候设置库的编码 使数据库编码和项目编码统一 则不会乱码</p> <p> </p> <p> </p> <pre>mysql&gt; create database test_db character set utf8 collate utf8_bin;
Query OK, 1 row affected (0.00 sec)

mysql&gt; use test_db
Database changed
mysql&gt; status
--------------
mysql  Ver 14.14 Distrib 5.5.32, for debian-linux-gnu (i686) using readline 6.2

Connection id:          92
Current database:       test_db
Current user:           root@localhost
SSL:                    Not in use
Current pager:          stdout
Using outfile:          ''
Using delimiter:        ;
Server version:         5.5.30-log MySQL Community Server (GPL)
Protocol version:       10
Connection:             Localhost via UNIX socket
Server characterset:    latin1
Db     characterset:    utf8
Client characterset:    utf8
Conn.  characterset:    utf8
UNIX socket:            /var/run/mysqld/mysqld.sock
Uptime:                 4 hours 51 min 48 sec

Threads: 7  Questions: 4139  Slow queries: 0  Opens: 252  Flush tables: 1  Open tables: 63  Queries per second avg: 0.236
--------------

mysql&gt; 
</pre> <pre>create database test_db character set utf8 collate utf8_bin;</pre> <p>创建库的时候在后面设置库的字符集。</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/character/">character</a></li> <li><a href="/tag/charset/">charset</a></li> <li><a href="/tag/mysql/">mysql</a></li> <li><a href="/tag/sql/">sql</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-22T13:52:13.000Z">October 22, 2013</time> <h1><a href="/post/jquery-animate-page-scrolling/">jquery animate 页面滚动</a></h1> </header> <section class="post-main"><p>这里说的页面滚动是指在浏览器中页面跳转到指定的 dom 或者说指定的 id 位置。</p> <p>跳转到指定的 id 直接在 url 后面加上 #id名 就可跳转过去，不过这样是直接跳过去的 没有一个过程，感觉会很生硬。</p> <p>jquery animate 便可以解决这个问题</p> <p>用法如下</p> <pre>$('html, body').animate({scrollTop: $('#download').offset().top}, 1000);</pre> <p>滚动条向下滚到到 id 为 download 的位置停止滚动， 后面的 1000 是用的时间 为 1 秒</p> <p> </p> <pre><code>$("html, body").animate({ scrollTop: "300px" });</code></pre> <p>跳转到页面高度为 300px 的位置 。</p> <p>还有很多中用法。。。。去搜吧</p> <p> </p> <p>另外可以变通 写成一函数 用的时候直接调用这个函数就行了</p> <p>例如上面的第一个</p> <pre><code>function scrolear(id){
    var stop = $("#"+id+"").offset().top;
    var delay = 1000;
    $('html, body').animate({scrollTop: stop}, delay);
    return false;
}</code></pre> <p> </p> <p>这样使用的时候传递一个 id 就能实现跳转的效果。</p> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/animate/">animate</a></li> <li><a href="/tag/javascript/">javascript</a></li> <li><a href="/tag/jquery/">jquery</a></li> <li><a href="/tag/scroll/">scroll</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-22T00:50:36.000Z">October 22, 2013</time> <h1><a href="/post/ubuntu-install-navita/">ubuntu 安装 navicat</a></h1> </header> <section class="post-main"><p>navicat 是一个mysql图形管理软件。</p> <p>之前在 win 操作系统中一直是在使用 mysql-font ，俩者的功能是一样的，不过 mysql-font 没有 ubuntu 版本，前面再用 Emma 这个 mysql 的图形管理软件，也听简单的，不过使用的时候发现有好多问题，严重的托慢了开发的速度。</p> <p>下面是 navicat 的安装以及配置过程</p> <p>到官网下载 navicat linux 版本</p> <p>http://www.navicat.com/download</p> <p>下载后解压</p> <pre>sudo tar -zxvf ~/download/navicat110_mysql_en.tar.gz -C /opt/navicat</pre> <p>启动 navicat</p> <pre>sudo /opt/navicat/start_navicat</pre> <p>这样 navicat 便可以启动和使用了，也搜索了些文章说可能会乱码(我没遇见，倒是emma会乱码。。)(等等。。。。。。。 卧槽 乱码了 。。。。 试试下面这能解决不)(解决了。。。下面的解决方式没用上。。。。原来是修改了字体 但是这个字体没有中文的样式 所以就会出现乱码 。。。。。记得删除 .navicat 文件夹在初始化一次)</p> <p>但是连接上数据库后里面的中文数据是乱码,找了下原因,把ubuntu的字符集修改为zh_CN.utf8就行了,修改方法:</p> <p>1,查看系统支持的字符集<br/> locale -a<br/> 结果:<br/> ~$ locale -a<br/> C<br/> en_AU.utf8<br/> en_BW.utf8<br/> en_CA.utf8<br/> en_DK.utf8<br/> en_GB.utf8<br/> en_HK.utf8<br/> en_IE.utf8<br/> en_IN<br/> en_NZ.utf8<br/> en_PH.utf8<br/> en_SG.utf8<br/> en_US.utf8<br/> en_ZA.utf8<br/> en_ZW.utf8<br/> POSIX<br/> zh_CN.utf8<br/> zh_HK.utf8<br/> zh_SG.utf8<br/> zh_TW.utf8</p> <p>2,修改字符集<br/> export LANG=zh_CN.utf8</p> <p> </p> <p>破解</p> <p>注册码都是在windows下的，ubuntu中无法使用</p> <p>第一次执行start_navicat时，会在用户主目录下生成一个名为.navicat的隐藏文件夹。</p> <p>此文件夹下有一个system.reg文件</p> <p>把此文件删除后，下次启动navicat 会重新生成此文件，30天试用期会按新的时间开始计算。</p> <p> </p> <p>---</p> <p>添加 navicat 快捷方式 通过命令启动</p> <pre>sudo ln -s /opt/navicat/start_navicat /usr/bin/navicat</pre> <p>。。。别试了 我试了几次都不能用</p> <p> </p> <p>但总是要有个快捷方式的吧 要不每次启动都到opt目录去多蛋疼</p> <p>添加一个图标启动</p> <pre>sudo sublime /usr/share/applications/navicat.desktop</pre> <p>navicat.desktop 内容如下：</p> <pre>[Desktop Entry]
Encoding=UTF-8
Name=Navicat
Comment=Navicat Mysql
Exec='/opt/navicat/start_navicat'
Icon=/opt/navicat/navicat.png
Terminal=false
StartupNotify=true
Type=Application

Categories=Application;Development;</pre> <p>那个navicat.png的图片直接把那网站的logo拿来用的 压缩包中没有图片</p> <p> </p> <p>这样 在ubuntu的super面板中就有navicat的图标了 点击就可启动</p> <p> </p> <p>---</p> <p>因为navicat有些库都是windows的程序 在navicat目录下 有很多dll文件，ubuntu中navicat运行是要依赖与wine的，也许是navicat里面放的wine程序版本比较低，第一次启动弹出了wine的升级(貌似)，根据需要选择吧。</p> <p> </p> <p>----------------</p> <p>眼抽+手残</p> <p>看到了 / 下有个navicat的目录 而且是空的</p> <p>遂 rm -rf 然后 启动navicat查询一直 报错 一直报错 。。。</p> <p>而且还都是windows的错。。。</p> <p>怎么找都是windows下的解决办法</p> <p>不过最终还是想办法解决了</p> <p>删除navicat的配置文件夹，让navicat重新运行初始化一次</p> <p>也就是上面破解说到的那个文件夹</p> <pre>sudo rm -rf ~/.navicat</pre> <p>再次启动navicat，解决了！</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/mysql/">mysql</a></li> <li><a href="/tag/navicat/">navicat</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-21T00:18:47.000Z">October 21, 2013</time> <h1><a href="/post/ubuntu-emma-chinese-garbled/">ubuntu emma 中文乱码</a></h1> </header> <section class="post-main"><p>emma 是 ubuntu 中一个mysql图形管理工具</p> <p>默认emma使用的编码是latin1那么数据中如果有中文的话查询出来会是乱码。</p> <p>设置emma的编码为utf8查询出来的中文就会正常</p> <p>执行如下命令：</p> <pre>~$ sudo sublime ~/.emma/emmarc</pre> <p>修改 db_encoding 值为 utf8</p> <pre>db_encoding=utf8</pre> <p>重新启动emma，在查询就会正常显示。</p> <p>如果还是乱码 执行这条sql便会正常</p> <pre>set names utf8</pre></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/character/">character</a></li> <li><a href="/tag/emma/">emma</a></li> <li><a href="/tag/mysql/">mysql</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-21T00:02:26.000Z">October 21, 2013</time> <h1><a href="/post/ubuntu-apache-on-url-rewriter/">ubuntu apache 开启 url rewriter</a></h1> </header> <section class="post-main"><p>如果安装了rewrite模块的话直接输入命令</p> <pre>sudo a2enmod rewrite</pre> <p>即可开启url rewriter。</p> <p>当然还要在apache的配置文件中做修改，否则就算开启了服务可还是不能使用</p> <p>打开apache配置文件</p> <pre>sudo gedit /etc/apache2/sites-enabled/000-default</pre> <p>将 AllowOverride None 修改成 All~ All</p> <pre>AllowOverride All</pre> <p> </p> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/apache/">apache</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> <li><a href="/tag/url-rewriter/">url-rewriter</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-20T23:19:40.000Z">October 20, 2013</time> <h1><a href="/post/ubuntu-php-connection-mysql/">ubuntu php 连接 mysql</a></h1> </header> <section class="post-main"><p>准备安装wordpress来写博的时候，安装的时候直接报错不能链接到数据库，遂测试了一下数据库链接，提示如下错误：</p> <pre>Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)</pre> <p> </p> <p>没有mysqld.sock这个文件，mysql的安装是通过deb安装包进行安装的，感觉应该不会出问题！！！</p> <p>查看 /etc/my.cnf 发现 socket 在 /tmp/mysql.sock</p> <p>搜索后发现很多解决方式，也试了好多方式，不过都失败了。。。。</p> <p>后来想想这些配置应该都是在php.ini这个配置文件中，那么就直接修改这个路径就是</p> <p>查看phpinfo发现 mysql mysqli 配置项都有这个配置，打开php配置文件，查找这些配置，把后面的路径改成mysql的配置文件看到的路径。</p> <p>好，安装成功。</p> <p> </p> <p>--------------------------------------</p> <p>等等。。。。。。。。</p> <p>其实还是不要用上面的方式，虽然上面的方式也能解决问题，，但是只是治标不治本，如果其他软件有问题还是不能链接数据库。</p> <p>原来配置很简单，只需要在mysql的配置文件中修改 socket 的值为/var/run/mysqld/mysqld.sock 就能解决彻底解决这个问题。。</p> <pre>sudo gedit /etc/my.cnf</pre> <pre>#socket        = /tmp/mysql.sock
socket          = /var/run/mysqld/mysqld.sock</pre> <p> </p> <p>之后重启mysql服务即可。</p> <p> </p> <p>=========</p> <p>蛋疼，饶了一圈 。。。。。。。。。。。。。。。。。</p> <p>不过也知道怎么解决了，虽然还是不明白是为什么 。。。。。。</p> <p>慢慢来，淡定 ！</p></section> <footer class="post-foot"> <ul class="post-tags"> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-20T23:06:28.000Z">October 20, 2013</time> <h1><a href="/post/update-mysql-character-encoding/">修改mysql数据库字符编码</a></h1> </header> <section class="post-main"><p>在ubuntu中把项目跑起来，添加了一条数据发现数据为中文时候，中文都变成了 ? 号。</p> <p>起初认为是因为项目或者说tomcat的配置原因导致传到后台的中文乱码了。</p> <p>然后在后台断点测试发现传递到后台的中文字符没有乱码，那就是数据库的原因了。</p> <p>修改方法如下：</p> <p>登录mysql查看字符编码</p> <pre>mysql&gt; show variables like 'character%';
+--------------------------+---------------------------------------+
| Variable_name            | Value                                 |
+--------------------------+---------------------------------------+
| character_set_client     | utf8                                  |
| character_set_connection | utf8                                  |
| character_set_database   | latin1                                |
| character_set_filesystem | binary                                |
| character_set_results    | utf8                                  |
| character_set_server     | latin1                                |
| character_set_system     | utf8                                  |
| character_sets_dir       | /opt/mysql/server-5.5/share/charsets/ |
+--------------------------+---------------------------------------+
8 rows in set (0.00 sec)</pre> <p>character_set_database 的编码是 latin1 这样添加中文的话就会乱码</p> <p>修改编码</p> <pre>mysql&gt; set character_set_database = utf8;

mysql&gt; set character_set_server = utf8;</pre> <p> </p> <pre>mysql&gt; show variables like 'character%';
+--------------------------+---------------------------------------+
| Variable_name            | Value                                 |
+--------------------------+---------------------------------------+
| character_set_client     | utf8                                  |
| character_set_connection | utf8                                  |
| character_set_database   | utf8                                  |
| character_set_filesystem | binary                                |
| character_set_results    | utf8                                  |
| character_set_server     | utf8                                  |
| character_set_system     | utf8                                  |
| character_sets_dir       | /opt/mysql/server-5.5/share/charsets/ |
+--------------------------+---------------------------------------+
8 rows in set (0.00 sec)</pre> <p>修改完成后再添加中文数据就不会乱码了。</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/character/">character</a></li> <li><a href="/tag/mysql/">mysql</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-19T12:45:22.000Z">October 19, 2013</time> <h1><a href="/post/install-ubuntu-no-boot-items/">安装ubuntu后没有开机启动项</a></h1> </header> <section class="post-main"><p>又一次安装ubuntu。。。</p> <p>几乎每次安装ubuntu都会出现问题。。。。。</p> <p>又重装了好多次。。。</p> <p>这次的问题是ubuntu安装完成后没有直接进入ubuntu的开机启动项</p> <p>安装ubuntu的时候也选择了开机是从ubuntu那盘启动的的，但是重启后还是直接进入了windows的启动界面。。。</p> <p>试了好多方式，把ubuntu那分区成为激活状态，任然无效。</p> <p>因为使用的是硬盘安装方式 使用了grub，原本安装了ubuntu之后的启动顺序应是 开机直接进入ubuntu启动项如果要进入windows系统在ubuntu进入grub选择windows启动</p> <p>这里并不是，而是没有进入ubuntu的启动项而是直接进入了windows的启动项。</p> <p>ubuntu也装了好多次还是不行。</p> <p>有说要在grub命令中修改ubuntu为第一启动项。。。。。可是。。。。试了几次。。。果然还是不行</p> <p>后来找到一方法是直接从grub启动ubuntu就成。</p> <p>既然直接从windows进入的，那么就从windows进入grub然后从grub进入ubuntu</p> <p>具体修改如下 (修改menu.lst)</p> <p>在menu.lst最后添加如下：</p> <pre>title Boot Ubuntu 13.04
root (hd1,0)
kernel (hd1,0)/vmlinuz root=/dev/sda1 ro quiet splash
initrd (hd1,0)/initrd.img</pre> <p>root(hd1,0) // 从(hd1,0)分区启动</p> <p>之后便是去找到ubuntu的启动文件启动ubuntu。</p> <p> </p> <p>也试了几次总算是把ubuntu启动了， 这里分区一定要真确否则就不能真确的找到ubuntu的启动文件 这样ubuntu还是不能启动 这里的<code>(hd1,0)</code>和<code>/dev/sda1</code>根据自己本机的实际情况填写</p> <p> </p> <p>不过这里还是从windows的启动项启动的，也可以直接从grub启动 然后选择是从windows启动还是ubuntu或者其他。</p> <p> </p> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/boot/">boot</a></li> <li><a href="/tag/grub/">grub</a></li> <li><a href="/tag/grub4dos/">grub4dos</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-15T00:38:26.000Z">October 15, 2013</time> <h1><a href="/post/windows-display-hidden-file-in-cmd/">显示隐藏文件的cmd命令</a></h1> </header> <section class="post-main"><p>1。解除对某磁盘某个文件夹的强行隐藏(示例)：</p> <p>attrib +s +h +a c:boot.ini</p> <p>2，解除对某磁盘全部文件夹的强行隐藏(示例)：</p> <p>attrib -s -h c:boot.ini</p> <p>以上示例中，d:为磁盘盘符；引号内为文件夹名称；相关命令参数：<br/> +r 设置只读文件属性。<br/> -r 清除只读文件属性。<br/> +a 设置存档属性。<br/> -a 清除存档属性。<br/> +s 设置系统文件属性。<br/> -s 清除系统文件属性。<br/> +h 设置隐藏文件属性。<br/> -h 清除隐藏文件属性。<br/> /s 将attrib和任意命令行选项应用到当前目录及其所有子目录中的匹配文件。<br/> /d 将attrib和任意命令行选项应用到目录。<br/> /? 在命令提示符下显示帮助。</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/cmd/">cmd</a></li> <li><a href="/tag/windows/">windows</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-10-10T13:43:54.000Z">October 10, 2013</time> <h1><a href="/post/java-web-session-set-time/">java web session 过期时间设置</a></h1> </header> <section class="post-main"><p>设置session时间有如下三种方式：</p> <p><strong>以tomcat为例，修改service.xml设置session过期时间</strong></p> <p>在 tomcat/conf/service.xml 文件中定义如下：</p> <pre>&lt;Context path="/test" docBase="/test"     
　　defaultSessionTimeOut="3600" isWARExpanded="true"     
　　isWARValidated="false" isInvokerEnabled="true"     
　　isWorkDirPersistent="false"/&gt;</pre> <p>defaultSessionTimeOut="3600″ -这个是失效时间</p> <p> </p> <p><strong>在项目的web.xml中设置</strong></p> <p>在项目的web.xml中添加如下：(单位为分钟)</p> <pre>&lt;session-config&gt;     
     &lt;session-timeout&gt;20&lt;/session-timeout&gt;     
&lt;/session-config&gt;</pre> <p> </p> <p><strong>在程序中定义</strong></p> <p>在使用session的地方设置session的存活时间</p> <pre>session.setMaxInactiveInterval(30*60);</pre> <p> </p> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/j2ee/">j2ee</a></li> <li><a href="/tag/java/">java</a></li> <li><a href="/tag/session/">session</a></li> </ul> </footer> </article> <menu class="page"> <li class="page-prev"> <a href="/page/9/" title="Previous">Prev</a> </li> <li class="page-next"> <a href="/page/11/" title="Next">Next</a> </li> </menu> </main> <footer class="foot"> <div>&copy;2017 iaceob</div> </footer> </body> </html>