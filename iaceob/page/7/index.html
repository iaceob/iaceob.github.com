<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.svg"> <title>生物烯丙菊 - 达文西手电筒 - 第 7 頁</title> <link rel="stylesheet" href="/css/style.css"> </head> <body> <header class="head"> <h1 class="head-title"><a href="/">生物烯丙菊</a></h1> <h3 class="head-description"> <span class="flashlight">达文西手电筒</span> </h3> <ul class="head-nav"> <li><a href="/">Home</a></li> <li><a href="/archives/">Archives</a></li> <li><a href="http://blog.3u3.me">幾文山</a></li> </ul> </header> <main class="main"> <article class="post"> <header class="post-head"> <time datetime="2013-12-20T10:02:02.000Z">December 20, 2013</time> <h1><a href="/post/how-box-shadow-works-in-css/">How Box-Shadow Works in CSS</a></h1> </header> <section class="post-main"><p>box-shadown works in css</p> <h2>The html:</h2> <pre>&lt;html&gt;
    &lt;head&gt;    
        &lt;title&gt;box-shadow works in css&lt;/title&gt;
    &lt;/head&gt; 
    &lt;body&gt; 
        &lt;div id="main"&gt; 
            &lt;h1&gt;Create Box Shadows&lt;/h1&gt; 
            &lt;h2&gt;Using CSS Styles&lt;/h2&gt; 
        &lt;/div&gt; 
    &lt;/body&gt; 
&lt;/html&gt;</pre> <h2>The CSS:</h2> <pre>body{     
    background:#fff; 
} 
h1, h2{     
    font-family:"Gill Sans", "Gill Sans MT", "Myriad Pro", "DejaVuSans Condensed", Helvetica, Arial, sans-serif;     
    text-shadow: -2px -2px 2px rgba( 0, 0, 0, .5);     
    color: #eee;     
    text-align:center;     
    padding-top: 20px; 
} 
#main{ 
    background:#fff; height: 200px; 
    box-shadow: -1px 2px 5px 3px #05EDFB; 
}</pre> <h2>The Result:</h2> <style type="text/css"><!--
#main-box-shadow-test{ background:#fff; height: 200px; box-shadow: -1px 2px 5px 3px #05EDFB; }  .box-shadow-style h1, .box-shadow-style h2{ font-family:"Gill Sans", "Gill Sans MT", "Myriad Pro", "DejaVuSans Condensed", Helvetica, Arial, sans-serif; text-shadow: -2px -2px 2px rgba( 0, 0, 0, .5); color: #eee; text-align:center; padding-top: 20px; }
--></style> <div id="main-box-shadow-test"> <h1>Create Box Shadows</h1> <h2>Using CSS Styles</h2> </div> <p> </p> <pre>#main{
    background:#fff;
    height: 200px;
    box-shadow: inset -1px 2px 5px 3px #05EDFB;
}</pre> <style type="text/css"><!--
#main-box-shadow-test-2{ background:#fff; height: 200px; box-shadow: inset -1px 2px 5px 3px #05EDFB; }
--></style> <div id="main-box-shadow-test-2"> <h1>Create Box Shadows</h1> <h2>Using CSS Styles</h2> </div> <p> </p> <p> </p> <p> </p> <p> </p> <ul> <li> <p title=" How Box-Shadow Works in CSS">http://www.webdesignblog.co/how-box-shadow-works-in-css/</p> </li> </ul></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/box-shadow/">box-shadow</a></li> <li><a href="/tag/css/">css</a></li> <li><a href="/tag/html/">html</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-18T20:34:34.000Z">December 18, 2013</time> <h1><a href="/post/ubuntu-firefox-flash-plugin/">ubuntu firefox flash plugin</a></h1> </header> <section class="post-main"><p>ubuntu firefox flash plugin</p> <p> </p> <p>默认ubuntu中firefox没有带flash插件</p> <p>firefox中所有也搜索不到该插件</p> <p>解决办法如下:</p> <pre>sudo apt-get install flashplugin-installer</pre> <p> </p> <p>=======</p> <p>html5 才是王道</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/browser/">browser</a></li> <li><a href="/tag/firefox/">firefox</a></li> <li><a href="/tag/flash-plugin/">flash-plugin</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-15T05:35:38.000Z">December 15, 2013</time> <h1><a href="/post/mysql-data-type/">mysql 数据类型</a></h1> </header> <section class="post-main"><p>mysql 数据类型</p> <p> </p> <p>mysql 数据类型有很多</p> <p>各个数据类型的作用也不同，下面的文字部分都是在网路中copy过来的，谈些看法</p> <p>tinyint 从 0 到 255 的整型数据。存储大小为 1 字节。</p> <p>smallint 从 -2^15 (-32,768) 到 2^15 - 1 (32,767) 的整型数据。存储大小为 2 个字节。</p> <p>int 从 -2^31 (-2,147,483,648) 到 2^31 - 1 (2,147,483,647) 的整型数据(所有数字)。存储大小为 4 个字节。</p> <p>bigint 从 -2^63 (-9223372036854775808) 到 2^63-1 (9223372036854775807) 的整型数据(所有数字)。存储大小为 8 个字节。</p> <p> </p> <p>tinyint 最大数字为 255</p> <p>smallint 最大数字为 32767</p> <p>int 最大数字为 2147483647</p> <p>bigint 最大数字未 9223372036854775807</p> <p>tinyint 3个数字 可以用来作为已知长度的数据 比如性别 <code>sex tinyint(1)</code> 至少感觉这样比char或者varchar效率要高</p> <p>smallint 也应同tinyint一样 存储已知长度的数据</p> <p>int 类型最多只能存储10个数字这样手机号码千万不能用此类型 否则数据存储的就不正确了</p> <p>bigint 能不用就不用 这么长的数字在各个后台程序中也不好使用 很容易发生问题 java 在使用这个bigint的时候 有个 BigInteger 类来读取</p> <p> </p> <p> </p> <p>char 最大长度是255字符</p> <p>varchar的最大长度65535是指能存储的字节数，其实最多只能存储65532个字节，还有3个字节用于存储长度。</p> <p>tinytext 最大长度为255(2^8-1)个字符。</p> <p>text和varchar基本相同。text会忽略指定的大小这和varchar有所不同，text不能有默认值。最大长度为65535(2^16-1)个字符。</p> <p>longtext 最大长度为4294967295(2^32-1)个字符。</p> <p> </p> <p>char varchar 可能是使用最多的数据类型 char 和 varchar 都可以存储字符但是俩者有不同之处</p> <p>char 会自动截取空格 varchar 不会截取</p> <p>char 不会产生磁盘碎片 varchar 会产生磁盘碎片</p> <pre>mysql&gt; create table tb_char_test(
    -&gt; content char(10)
    -&gt; ) charset=utf8;
Query OK, 0 rows affected (0.13 sec)

mysql&gt; insert into tb_char_test values('0');
Query OK, 1 row affected (0.14 sec)

mysql&gt; insert into tb_char_test values('012345');
Query OK, 1 row affected (0.07 sec)

mysql&gt; insert into tb_char_test values('0123456789');
Query OK, 1 row affected (0.11 sec)

mysql&gt; insert into tb_char_test values('01234567890');
Query OK, 1 row affected, 1 warning (0.09 sec)

mysql&gt; insert into tb_char_test values('0           ');
Query OK, 1 row affected (0.08 sec)

mysql&gt; insert into tb_char_test values('0      1 2');
Query OK, 1 row affected (0.05 sec)

mysql&gt; insert into tb_char_test values('0   1  2   3 4');
Query OK, 1 row affected, 1 warning (0.12 sec)

mysql&gt; insert into tb_char_test value('中文一中文二中文三中文四');
Query OK, 1 row affected, 1 warning (0.08 sec)

mysql&gt; select * from tb_char_test_2;
+--------------------------------+
| content                        |
+--------------------------------+
| 中文一中文二中文三中             |
+--------------------------------+
1 row in set (0.00 sec)

mysql&gt; select * from tb_char_test;
+-----------------------------+
| content                     |
+-----------------------------+
| 0                           |
| 012345                      |
| 0123456789                  |
| 0123456789                  |
| 0                           |
| 0      1 2                  |
| 0   1  2                    |
| 中文一中文二中文三中          |
+-----------------------------+
8 rows in set (0.00 sec)

mysql&gt; select length(content) from tb_char_test;
+-----------------+
| length(content) |
+-----------------+
|               1 |
|               6 |
|              10 |
|              10 |
|               1 |
|              10 |
|               8 |
|              10 |
+-----------------+
8 rows in set (0.00 sec)</pre> <p>创建了一个表 tb_char_test 有字段 content 长度为10</p> <p>首先添加了几条条数据 分别是 0 , 012345 , 01234567890 , 0 , 0 1 2 , 0 1 2 3 4 , 中文一中文二中文三中文四</p> <p>查询后发现 01234567890 最后的0被截取了 因为content最大的长度为10 而这条数据长度为11就吧最后的0给截取了</p> <p>中文数据 中文四 的中之后的字都截取了 中文一中文二中文三中 是10个字符</p> <p>使用 mysql length 查询数据的长度发现</p> <p>0 的长度为1那么0后面的空格都被截取了 其他用空格的数据也是如此</p> <p> </p> <pre>mysql&gt; create table tb_varchar_test(
    -&gt; content varchar(10)
    -&gt; ) charset=utf8;
Query OK, 0 rows affected (0.21 sec)

mysql&gt; insert into tb_varchar_test values('0');
Query OK, 1 row affected (0.13 sec)

mysql&gt; insert into tb_varchar_test values('0   1');
Query OK, 1 row affected (0.08 sec)

mysql&gt; delete from tb_varchar_test where content='0   1';
Query OK, 1 row affected (0.10 sec)

mysql&gt; insert into tb_varchar_test values('012345');
Query OK, 1 row affected (0.13 sec)

mysql&gt; insert into tb_varchar_test values('0123456789');
Query OK, 1 row affected (0.12 sec)

mysql&gt; insert into tb_varchar_test values('01234567890');
Query OK, 1 row affected, 1 warning (0.09 sec)

mysql&gt; insert into tb_varchar_test values('0           ');
Query OK, 1 row affected, 1 warning (0.14 sec)

mysql&gt; insert into tb_varchar_test values('0      1 2');
Query OK, 1 row affected (0.11 sec)

mysql&gt; insert into tb_varchar_test values('0   1  2   3 4');
Query OK, 1 row affected, 1 warning (0.08 sec)

mysql&gt; insert into tb_varchar_test values('中文一中文二中文三中文四');
Query OK, 1 row affected, 1 warning (0.10 sec)

mysql&gt; select * from tb_varchar_test;
+--------------------------------+
| content                        |
+--------------------------------+
| 0                              |
| 012345                         |
| 0123456789                     |
| 0123456789                     |
| 0                              |
| 0      1 2                     |
| 0   1  2                       |
| 中文一中文二中文三中             |
+--------------------------------+
8 rows in set (0.00 sec)

mysql&gt; select length(content) from tb_varchar_test;
+-----------------+
| length(content) |
+-----------------+
|               1 |
|               6 |
|              10 |
|              10 |
|              10 |
|              10 |
|              10 |
|              30 |
+-----------------+
8 rows in set (0.00 sec)</pre> <p>创建了一个varchar测试表</p> <p>添加的数据和char表都是相同的</p> <p>查询后发现 01234567890 的0被截取了 中文数据也被截取了</p> <p>炸一看和char没什么区别</p> <p>查询lenght后发现 还是有区别的</p> <p>char 和 varchar 表的 第5 7 8 条的数据长度是不同的</p> <p>char 分别是 1 8 10</p> <p>varchar 分别是 10 10 30</p> <p>varchar 在存储的时候将空格考虑进去了 因此 5 7 俩条数据长度为10，在存储中文的时候，一个汉字字符用utf8占用3字节，十个字符长度就是3*10</p> <p> </p> <p>从效率角度出发 在选择 char 和 varchar 的时候 根据当前字段需要存储的数据有多长而去选择 比如 用户名 长度不会超过 20 那么char将是不错的选择 用户密码如果是md5值的话所有的值长度都是固定的那么就选择用char，而varchar的选择是在数据不固定的场合，比如用户留言，留言的长度不确定有多长 有可能是几个字 有可能几百字</p> <p>char 的选择 在数据为固定长度或者长度相近</p> <p>varchar 的选择 在数据未不固定长度或者相对较长</p> <p>text 为长文本存储 能存储的数据比varchar多 比如博客文章的存储可以使用text，如果文章很长的话可用考虑 longtext 等</p> <p> </p> <p> </p> <p> </p> <p>enum 枚举</p> <p>枚举类型是mysql特有的类型</p> <p>可以作为已知类型判断用 如 性别 sex enum(‘F’,’M’)</p> <p>虽然 enum 提供了更高效的类型 但是在选择enum的时候 要慎用</p> <p>见文下链接</p> <p> </p> <p> </p> <p> </p> <p> </p> <p> </p> <p>date 一个日期。支持的范围是’1000-01-01’到’9999-12-31’。MySQL以’YYYY-MM-DD’格式来显示DATE值，但是允许你使用字符串或数字把值赋给DATE列。</p> <p>datetime 一个日期和时间组合。支持的范围是’1000-01-01 00:00:00’到 ‘9999-12-31 23:59:59’。MySQL以’YYYY-MM-DD HH:MM:SS’格式来显示DATETIME值，但是允许你使用字 符串或数字把值赋给DATETIME的列。</p> <p>timestamp 一个时间戳记。范围是’1970-01-01 00:00:00’到2037年的某时。MySQL以 YYYYMMDDHHMMSS、YYMMDDHHMMSS、YYYYMMDD或YYMMDD格式来显示TIMESTAMP值，取决于是否M是14(或省 略)、12、8或6，但是允许你使用字符串或数字把值赋给TIMESTAMP列。一个TIMESTAMP列对于记录一个INSERT或UPDATE操作的 日期和时间是有用的，因为如果你不自己给它赋值，它自动地被设置为最近操作的日期和时间。你以可以通过赋给它一个NULL值设置它为当前的日期和时间。</p> <p>time 一个时间。范围是’-838:59:59’到’838:59:59’。MySQL以’HH:MM:SS’格式来显示TIME值，但是允许你使用字符串或数字把值赋给TIME列。</p> <p> </p> <p>mysql 提供了很多存储时间的类型 但是我在使用的时候都没用使用这些类型 而是使用了 char 作为存储时间的类型 通常我存储的时间都是时间戳而不是被转后后的时间，像 1387056741 的一条数据 解析后的时间是 2013-12-15 05-32-21 而不是存储的 像 2013-12-15 05：32：21 ，在使用时间的时候时间戳的应用会更灵活 。</p> <p>时间戳是自 1970 年 1 月 1 日(08:00:00 GMT)至当前时间的总秒数。</p> <p>之所以用char没用int</p> <p>java 中使用 System.currentTimeMillis(); 返回的是 1970-1-1 到现在的毫秒数而不是秒数</p> <p>php 中time()获取的是秒数</p> <p>虽然可以把 System.currentTimeMillis(); 封装下 。。。 想想还是算了。</p> <p> </p> <p> </p> <ul> <li> <p title="mysql的char,varchar,text,blob的几点个人理解">http://www.blogguy.cn/show-809-1.html</p> </li> <li> <p title="慎用mysql的enum字段">http://my.oschina.net/u/234530/blog/68275</p> </li> </ul> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/database/">database</a></li> <li><a href="/tag/mysql/">mysql</a></li> <li><a href="/tag/type/">type</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-15T03:31:15.000Z">December 15, 2013</time> <h1><a href="/post/css-gaussian-blur/">css 高斯模糊</a></h1> </header> <section class="post-main"><p>css 实现高斯模糊效果</p> <style type="text/css"><!--
.demo-blur{ text-shadow: 0px 0px 10px rgba(51, 51, 51, 0.9); color: rgba(0, 0, 0, 0); opacity: 0.5; } .demo-gaussian-blur{ -webkit-filter: blur(6px); -moz-filter: blur(6px); -o-filter: blur(6px); -ms-filter: blur(6px); filter: blur(6px); }
.demo-blur-shadow{text-shadow: 0px 20px 2px #abc000;}
--></style> <p> </p> <p> </p> <p>演示：</p> <p>text-shadow 文字阴影方式</p> <p><img src="/img/css-gaussian-blur/1.png"></p> <p>google</p> <p>google</p> <p>这种方式也并不能完全说是高斯模糊 只是使用了 <code>text-shadow</code> 文字阴影 等配合使用 这样文字会有效果 但是图片则不会有效果</p> <pre>.demo-blur{ 
    text-shadow: 0px 0px 10px rgba(51, 51, 51, 0.9); 
    color: rgba(0, 0, 0, 0); 
    opacity: 0.5; 
}

.demo-blur-shadow {
    text-shadow: 0px 20px 2px #333333;
}
</pre> <p> </p> <p>css filter 过滤方式</p> <p><img src="/img/css-gaussian-blur/1.png"></p> <p>google</p> <pre>.demo-gaussian-blur{ 
    -webkit-filter: blur(3px); 
    -moz-filter: blur(3px); 
    -o-filter: blur(3px); 
    -ms-filter: blur(3px); 
    filter: blur(3px); 
}</pre> <p>支持对图片等包括 video 标签的模糊。</p> <p>但是 这种方法 目前支持的浏览器不多</p> <p><img src="/img/css-gaussian-blur/2.jpg"></p> <p>上图中绿色标识的浏览器都可以使用</p> <p> </p> <p>svg 方式</p> <pre>&lt;?xml version="1.0" encoding="utf-8"?&gt; 
&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt; 
&lt;!--Scalable Vector Graphic--&gt; 
&lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" baseProfile="full"&gt; 
    &lt;defs&gt; 
        &lt;filter id="blur"&gt; 
            &lt;feGaussianBlur stdDeviation="10" /&gt; 
        &lt;/filter&gt; 
     &lt;/defs&gt; 
     &lt;image xlink:href="http://x.x.x/yourimg.jpg" x="0" y="0" filter="url(#blur)" /&gt; 
&lt;/svg&gt;</pre> <pre>.blur {	
    filter: url(blur.svg#blur); /* FireFox, Chrome, Opera */

    -webkit-filter: blur(10px); /* Chrome, Opera */
       -moz-filter: blur(10px);
        -ms-filter: blur(10px);    
            filter: blur(10px);

    filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=10, MakeShadow=false); /* IE6~IE9 */
}</pre> <pre>&lt;img src="xxx.jpg" /&gt;</pre> <p> </p> <p>StackBlur.js canvas</p> <p>css</p> <pre>.blur {		
    filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=10, MakeShadow=false); /* IE6~IE9 */
}
:root .blur {
    display: none; /* IE9+, Firefox, Chrome, Opera - hidden */
    filter: none; /* no IE9 */
}</pre> <p>html</p> <pre> &lt;img src="xxx.jpg" id="blur" /&gt; 
 &lt;canvas id="canvas"&gt;&lt;/canvas&gt;</pre> <p>js</p> <pre>&lt;script src="StackBlur.js"&gt;&lt;/script&gt; 
&lt;script&gt; stackBlurImage( "blur", "canvas", 20, false ); &lt;/script&gt;</pre> <p> </p> <p>====</p> <p>综合来看</p> <p>使用文字阴影方式虽然效果没有其他方式好 但是目前大多浏览器都能够支持</p> <p>css filter 过滤的效果很好但是目前支持的浏览器不多</p> <p>svg方式效果也很好 而且浏览器都支持svg 但是svg使用略不爽(个人感觉。。。)</p> <p>StackBlur.js+canvas 是个亮点 canvas 标签是html5的标签 目前大多现代浏览器都能够支持了， stackblur.js 的模糊效果也很好</p> <p> </p> <p>相关链接：</p> <ul> <li> <p title="CSS3 filter 模糊滤镜的应用">http://mao.li/css3-blur-filter-pratice/</p> </li> <li> <p title="小tip-使用css将图片转换成模糊毛玻璃效果">http://www.zhangxinxu.com/wordpress/?p=3804</p> </li> <li> <p title="StackBlur.js">http://www.quasimondo.com/StackBlurForCanvas/StackBlur.js</p> </li> <li> <p title="StackBlurDemo">http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html</p> </li> <li> <p title="Item Blur Effect with CSS3 &amp; jQuery">http://tympanus.net/Tutorials/ItemBlur/</p> </li> </ul></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/blur/">blur</a></li> <li><a href="/tag/canvas/">canvas</a></li> <li><a href="/tag/css/">css</a></li> <li><a href="/tag/filter/">filter</a></li> <li><a href="/tag/gaussian/">gaussian</a></li> <li><a href="/tag/html/">html</a></li> <li><a href="/tag/javascript/">javascript</a></li> <li><a href="/tag/svg/">svg</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-15T00:30:42.000Z">December 15, 2013</time> <h1><a href="/post/fonts-collect/">字体收藏</a></h1> </header> <section class="post-main"><p> <a href="/post/fonts-collect/#more-319">继续阅读字体收藏 →</a></p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/css/">css</a></li> <li><a href="/tag/fonts/">fonts</a></li> <li><a href="/tag/google-font/">google-font</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-12T14:11:34.000Z">December 12, 2013</time> <h1><a href="/post/java-direct-insertion-bubble-sort-algorithm-etc/">Java 直接插入、冒泡 等 排序算法</a></h1> </header> <section class="post-main"><p>排序算法</p> <pre> 希尔排序：
public class shellSort {  
public  shellSort(){  
    int a[]={1,54,6,3,78,34,12,45,56,100};  
    double d1=a.length;  
    int temp=0;  
    while(true){  
        d1= Math.ceil(d1/2);  
        int d=(int) d1;  
        for(int x=0;x&lt;d;x++){  
            for(int i=x+d;i&lt;a.length;i+=d){  
                int j=i-d;  
                temp=a[i];  
                for(;j&gt;=0&amp;&amp;temp&lt;a[j];j-=d){  
                a[j+d]=a[j];  
                }  
                a[j+d]=temp;  
            }  
        }  
        if(d==1)  
            break;  
    }  
    for(int i=0;i&lt;a.length;i++)  
        System.out.println(a[i]);  
}  
}  

/******************************************************************/
简单选择排序:
public class selectSort {  
    public selectSort(){  
        int a[]={1,54,6,3,78,34,12,45};  
        int position=0;  
        for(int i=0;i&lt;a.length;i++){  

            int j=i+1;  
            position=i;  
            int temp=a[i];  
            for(;j&lt;a.length;j++){  
            if(a[j]&lt;temp){  
                temp=a[j];  
                position=j;  
            }  
            }  
            a[position]=a[i];  
            a[i]=temp;  
        }  
        for(int i=0;i&lt;a.length;i++)  
            System.out.println(a[i]);  
    }  
}  

/*****************************************************************/
堆排序 :
import java.util.Arrays;  

public class HeapSort {  
     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  
    public  HeapSort(){  
        heapSort(a);  
    }  
    public  void heapSort(int[] a){  
        System.out.println("开始排序");  
        int arrayLength=a.length;  
        //循环建堆  
        for(int i=0;i= 0;i--){  
            //k保存正在判断的节点  
            int k=i;  
            //如果当前k节点的子节点存在  
            while(k*2+1&lt;=lastIndex){  
                //k节点的左子节点的索引  
                int biggerIndex=2*k+1;  
                //如果biggerIndex小于lastIndex，即biggerIndex+1代表的k节点的右子节点存在  
                if(biggerIndex &lt; lastIndex){  
                    //若果右子节点的值较大  
                    if(data[biggerIndex] &lt; data[biggerIndex+1]){  
                        //biggerIndex总是记录较大子节点的索引  
                        biggerIndex++;  
                    }  
                }  
                //如果k节点的值小于其较大的子节点的值  
                if(data[k] &lt; data[biggerIndex]){  
                    //交换他们  
                    swap(data,k,biggerIndex);  
                    //将biggerIndex赋予k，开始while循环的下一次循环，重新保证k节点的值大于其左右子节点的值  
                    k=biggerIndex;  
                }else{  
                    break;  
                }  
            }
                }
        }
}

/**************************************************************************/
冒泡排序:
public class bubbleSort {  
public  bubbleSort(){  
     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  
    int temp=0;  
    for(int i=0;i&lt;a.length-1;i++){  
        for(int j=0;j&lt;a.length-1-i;j++){  
        if(a[j]&gt;a[j+1]){  
            temp=a[j];  
            a[j]=a[j+1];  
            a[j+1]=temp;  
        }  
        }  
    }  
    for(int i=0;i&lt;a.length;i++)  
    System.out.println(a[i]);     
}  
}</pre> <ul> <li> <p title="Java 语言实现的直接插入、冒泡等几个经典排序算法">http://www.oschina.net/code/snippet_1262919_26838</p> </li> </ul></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/algorithm/">algorithm</a></li> <li><a href="/tag/bubble/">bubble</a></li> <li><a href="/tag/java/">java</a></li> <li><a href="/tag/sort/">sort</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-12T01:55:54.000Z">December 12, 2013</time> <h1><a href="/post/user-form-input-filter/">用户文本输入过滤器</a></h1> </header> <section class="post-main"><p>用户文本输入过滤器</p> <p>有句话好像这么说 "永远不要相信用户的输入"</p> <p>。。。。。。</p> <p>很简单 如果没有对用户的输入进行过滤的话</p> <p>站点是非常不安全的，且用户可能会输入一些敏(和谐)感(和谐)字</p> <p>比如前台一个表单文本输入框中 输入 <code>&lt;script&gt;alert("hello")&lt;/script&gt;</code></p> <p>然后就这么直接提交到了数据库中 当页面中查询了这条数据 那么页面就会弹出一个框。。。当然能做的事情很多，这是很危险的。</p> <p>js也可用在提交之前就对文本过滤 然后传递到后台去的值都是被过滤后的值，这样就不会出现这样的问题。但是！。。。。js是防不住人的。</p> <p>前台也许不用对用户输入的数据过滤 但是后台必须要有过滤</p> <p>这里是 java 版的 这段时间也没用 php 了 等到时侯用了 在来补充这文章</p> <ol> <li>j2ee 用户文本输入过滤器</li> </ol> <p>index.jsp</p> <pre>&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Insert title here&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action="ht2ms.action" method="post"&gt;
            &lt;textarea name="html" rows="10" cols="25"&gt;&lt;/textarea&gt;
            &lt;textarea name="html2" rows="10" cols="25"&gt;&lt;/textarea&gt;
            &lt;input type="submit" value="提交"/&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre> <p>ht2ms.jsp</p> <pre>&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;title&gt;Insert title here&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form action="&lt;%=basePath %&gt;index.jsp" method="get"&gt;
            &lt;input type="submit" value="返回"/&gt;
        &lt;/form&gt;
        &lt;strong&gt;结果:&lt;/strong&gt;
        &lt;p&gt;${aaa }
        &lt;p&gt;${bbb }
        &lt;p&gt;-------------------------------
        &lt;p&gt;&lt;%out.print(request.getAttribute("aaa")); %&gt;
        &lt;p&gt;&lt;%out.print(request.getAttribute("bbb")); %&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre> <p>HtmlTag2MetacharactersServlet.java</p> <pre>package com.demo.filter;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class HtmlTag2MetacharactersServlet
 */
public class HtmlTag2MetacharactersServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public HtmlTag2MetacharactersServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request, response);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        request.setCharacterEncoding("utf-8");

        String html = request.getParameter("html");
        String html2 = request.getParameter("html2");

        System.out.println("servlet====" + html);
        System.out.println("servlet====" + html2);
        request.setAttribute("aaa", html);
        request.setAttribute("bbb", html2);

        response.setContentType("text/html");
        response.setCharacterEncoding("UTF-8");
        request.getRequestDispatcher("/ht2ms.jsp").include(request,response);
    }

}</pre> <p>HtmlTag2MetacharactersFilter.java</p> <pre>package com.demo.filter;

import java.io.IOException;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

/**
 * Servlet Filter implementation class htmlTag2Metacharacters
 */
//@WebFilter("/htmlTag2Metacharacters")
public class HtmlTag2MetacharactersFilter implements Filter {

    /**
     * Default constructor. 
     */
    public HtmlTag2MetacharactersFilter() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @see Filter#destroy()
     */
    public void destroy() {
        // TODO Auto-generated method stub
    }

    /**
     * @see Filter#doFilter(ServletRequest, ServletResponse, FilterChain)
     */
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest filterRequest = (HttpServletRequest)request;
        HttpSession session = filterRequest.getSession();
        request.setCharacterEncoding("utf-8");

//        Map map = request.getParameterMap();
//        Set&lt;String&gt; key = map.keySet();
//        for (Iterator it = key.iterator(); it.hasNext();) {
//            String s = (String) it.next();
//            request.removeAttribute(s);
//            request.setAttribute(s, htmlTag2Metacharacters(request.getParameter(s)));
//            System.out.println(htmlTag2Metacharacters(request.getParameter(s)));
//            System.out.println(request.getParameter(s));
//        }

        Map&lt;String,String[]&gt; m = new HashMap&lt;String,String[]&gt;(request.getParameterMap());
        Set&lt;String&gt; key = m.keySet();
        for (Iterator it = key.iterator(); it.hasNext();) {
            String s = (String) it.next();  
            m.put(s, new String[]{ htmlTag2Metacharacters(request.getParameter(s)) });
        }
        request = new ParameterRequestWrapper((HttpServletRequest)request, m);  
        System.out.println(request.getParameter("html"));  
        System.out.println(request.getParameter("html2"));

        chain.doFilter(request, response);
    }

    /**
     * @see Filter#init(FilterConfig)
     */
    public void init(FilterConfig fConfig) throws ServletException {
        // TODO Auto-generated method stub
    }

   public String htmlTag2Metacharacters(String html) { 
        if (html == null) { 
            return ""; 
        } 
        StringBuffer escapedText = new StringBuffer(); 
        for (int i=0; i&lt;html.length(); i++) { 
            char ch = html.charAt(i); 
            switch (ch) {
            case ''':
                escapedText.append("&amp;#39;");
                break;
            case '"':
                escapedText.append("&amp;quot;");
                break;
            case '&lt;':
                escapedText.append("&amp;lt;"); 
                break;
            case '&gt;':
                escapedText.append("&amp;gt;"); 
                break;
            case '&amp;':
                escapedText.append("&amp;amp;"); 
                break;
            case 'n':
                escapedText.append("&lt;br&gt;n"); 
                break;
            case ' ':
                escapedText.append("&amp;nbsp;"); 
                break;
            case 't':
                escapedText.append("&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"); 
                break;
            default:
                escapedText.append(ch); 
            }
        } 
        return escapedText.toString(); 
    } 

}</pre> <p>ParameterRequestWrapper.java</p> <pre>package com.demo.filter;

import java.util.Enumeration;
import java.util.Map;
import java.util.Vector;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;

public class ParameterRequestWrapper extends HttpServletRequestWrapper {  

    private Map&lt;String, String[]&gt; params;  

    public ParameterRequestWrapper(HttpServletRequest request,  
            Map&lt;String, String[]&gt; newParams) {  
        super(request);  

        this.params = newParams;  

        // RequestDispatcher.forward parameter  
        renewParameterMap(request);  
    }  

    @Override  
    public String getParameter(String name) {  
        String result = "";  

        Object v = params.get(name);  
        if (v == null) {  
            result = null;  
        } else if (v instanceof String[]) {  
            String[] strArr = (String[]) v;  
            if (strArr.length &gt; 0) {  
                result =  strArr[0];  
            } else {  
                result = null;  
            }  
        } else if (v instanceof String) {  
            result = (String) v;  
        } else {  
            result =  v.toString();  
        }  

        return result;  
    }  

    @Override  
    public Map getParameterMap() {  
        return params;  
    }  

    @Override  
    public Enumeration getParameterNames() {  
        return new Vector(params.keySet()).elements();  
    }  

    @Override  
    public String[] getParameterValues(String name) {  
        String[] result = null;  

        Object v = params.get(name);  
        if (v == null) {  
            result =  null;  
        } else if (v instanceof String[]) {  
            result =  (String[]) v;  
        } else if (v instanceof String) {  
            result =  new String[] { (String) v };  
        } else {  
            result =  new String[] { v.toString() };  
        }  

        return result;  
    }  

    private void renewParameterMap(HttpServletRequest req) {  

        String queryString = req.getQueryString();  

        if (queryString != null &amp;&amp; queryString.trim().length() &gt; 0) {  
            String[] params = queryString.split("&amp;");  

            for (int i = 0; i &lt; params.length; i++) {  
                int splitIndex = params[i].indexOf("=");  
                if (splitIndex == -1) {  
                    continue;  
                }  

                String key = params[i].substring(0, splitIndex);  

                if (!this.params.containsKey(key)) {  
                    if (splitIndex &lt; params[i].length()) {  
                        String value = params[i].substring(splitIndex + 1);  
                        this.params.put(key, new String[] { value });  
                    }  
                }  
            }  
        }  
    }  

}</pre> <p>web.xml</p> <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"&gt;
  &lt;display-name&gt;&lt;/display-name&gt;
  &lt;welcome-file-list&gt;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
  &lt;/welcome-file-list&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;ht2ms&lt;/servlet-name&gt;
    &lt;servlet-class&gt;com.demo.filter.HtmlTag2MetacharactersServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;ht2ms&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/ht2ms.action&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;

  &lt;filter&gt;
      &lt;filter-name&gt;HtmlTag2Metacharacters&lt;/filter-name&gt;
      &lt;filter-class&gt;com.demo.filter.HtmlTag2MetacharactersFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
  &lt;filter-mapping&gt;
      &lt;filter-name&gt;HtmlTag2Metacharacters&lt;/filter-name&gt;
      &lt;url-pattern&gt;*.action&lt;/url-pattern&gt;
      &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
&lt;/web-app&gt;</pre> <p> </p> <p>做完这些 用户输入的html标签都会被转换成通用字符，这样就会原型输出标签，不会被解释</p> <p>之前也试着在网路上找一些实例，可是都没有一个较为完整的代码 都不能实现功能，然后就各种蛋疼。。。</p> <p>真的很讨厌那种自己开了博客 然后文章都是从这从那拷贝出来的。。。。。。。</p> <p>(虽然我有时也会copy，但是！我copy过来的样式还是很好的好不 ！也留了原文链接的！)</p> <p>。。。。。。。。。。</p> <p>说说流程吧</p> <p>index 里面的表单数据提交到 servlet 去</p> <p>到servlet之前会在filter中对html标签进行过滤成转意字符，servlet在去从request获取的数据已经是被转码后的内容了</p> <p>然后在发送到request跳转到 ht2ms.jsp 显示</p> <p> </p> <p>关于filter里面的过滤</p> <p>filter 的流程大概为</p> <p>获取 request 里的所有内容 放到 map 中</p> <p>然后对这个map遍历 获取每个key和value</p> <p>然后对value转换</p> <p>将转换后的value再次发送到相应的key中</p> <p>完成了继续向下执行</p> <p>其中有段注释代码 那段代码是之前写的 既然是替换 遍历map的时候request.setAttrxxxxx相应的key和转换后的value就成了，但是实时上这样是行不通的，request里面的值是不能修改的，具体的参考文下链接，其中ParameterRequestWrapper.java就是解决这个问题的(也是从文中copy的)</p> <p>我的理解是 ParameterRequestWrapper.java 重行定义了request的一些方法 实现了修改 request 里面的值。。。</p> <p>好吧 我只是对其做了简单的应用 不是真正的解决问题。。。。。。</p> <p>感觉 @和尚 ！！！</p> <p>...........！</p> <ol> <li>php</li> </ol> <p>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p> <p> </p> <ul> <li> <p title="使用HttpServletRequestWrapper在filter修改request参数">http://blog.csdn.net/xieyuooo/article/details/8447301</p> </li> <li> <p title="如何修改request的parameter的几种方式 ">http://rensanning.iteye.com/blog/1706208</p> </li> </ul> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/code/">code</a></li> <li><a href="/tag/filter/">filter</a></li> <li><a href="/tag/form/">form</a></li> <li><a href="/tag/html/">html</a></li> <li><a href="/tag/input/">input</a></li> <li><a href="/tag/java/">java</a></li> <li><a href="/tag/request/">request</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-10T11:07:20.000Z">December 10, 2013</time> <h1><a href="/post/hibernate3-case-by-java-lang-nosuchmethoderror-javax-persistence-onetoone-orphanremovalz/">hibernate3 – case by: java.lang.NoSuchMethodError: javax.persistence.OneToOne.orphanRemoval()Z</a></h1> </header> <section class="post-main"><p>从 hibernate3.3 升级到 hibernate3.5</p> <p>项目中使用hibernate版本是 3.3 (。。。)</p> <p>但是由于项目需求 需要使用 <code>@Subselect</code> 注解来完成复杂的数据查询</p> <p>但是 3.3 不支持 <code>@Subselect</code> 。。。</p> <p>然后 就各种蛋疼。。。。</p> <p>那么就升级吧</p> <p>下载了个 4.0 。。完全跑不起来</p> <p>折磨了好长时间</p> <p>然后找最接近的版本 配置应该差不多</p> <p>下载了 3.5</p> <p>spring 的 <code>applicationContext.xml</code> 文件中也没有改什么配置</p> <p>只是要注意 hibernate 的 jar 包</p> <p>项目中使用 hibernate annoation 来进行配置的</p> <p>hibernate 3.3 的 annotation 是独立的包 也就是需要导入几个包</p> <pre>hibernate3.jar
hibernate-annotations.jar
hibernate-commons-annotations.jar</pre> <p>但是 hibernate3.5 的 annotation 已经集合到了 hibernate3.jar 中</p> <p>心惊肉调 。。。这不坑爹吗。。。</p> <p>果然 删除了 hibernate3.3 的jar包 把 hibernate3.5 的 jar包拷贝进去配置没改 直接报错了 。。。。</p> <p>一番查找</p> <p>结果：</p> <p>hibernate3.5 需要导入 <code>hibernate-jpa-2.0-api-1.0.0.Final.jar </code>hibernate3.5 使用jpa标准注解。</p> <p>然后又报错了。。。</p> <p>错误内容如标题</p> <p>又一番查找</p> <p>hibernate-jpa-2.0-api-1.0.0.Final和ejb3-persistence有冲突，如果升级到 Hibernate3.5<br/> 那么可以把ejb3-persistence干掉</p> <p>然后 我泪奔了 终于特么好了。。。。</p> <p>===================</p> <p>表示不仅仅就这里说的几个错误。。。。</p> <p>还有好多没记录</p> <p>反正好蛋疼的说</p> <p>真被折腾的我 。。。</p> <p>hibernate 操作数据是方便 但是抛弃了sql的灵活性。。</p> <p>太高深</p> <p> </p> <ul> <li>http://www.cnblogs.com/hqr9313/archive/2012/08/14/2638168.html</li> </ul></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/hibernate/">hibernate</a></li> <li><a href="/tag/java/">java</a></li> <li><a href="/tag/nosuchmethoderror/">NoSuchMethodError</a></li> <li><a href="/tag/spring/">spring</a></li> <li><a href="/tag/subselect/">subselect</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-04T19:17:38.000Z">December 4, 2013</time> <h1><a href="/post/ubuntu-goagent/">阿根廷 。。。。。</a></h1> </header> <section class="post-main"><p>goagent</p> <p>https://code.google.com/p/goagent</p> <p>下载aoagent解压到 /opt</p> <pre>~$ sudo unzip ~/download/goagent-goagent-v3.0.8-61-g1246c9c.zip -D /opt</pre> <p>https://developers.google.com/appengine/downloads</p> <p>下载 <code>Google App Engine SDK for Python</code> 解压到 /opt</p> <pre>~$ sudo unzip ~/download/google_appengine_1.8.8.zip -D /opt</pre> <p>在gogent/server/python目录下有文件 app.yaml 文件，打开进行编辑，输入创建的appid</p> <pre>~$ sudo gedit /opt/goagent/server/python/app.yaml</pre> <pre>application: yourappid
version: 1
runtime: python27
api_version: 1
threadsafe: true</pre> <p>版本默认是1</p> <p>将goagent提交的gae中</p> <pre>~$ sudo python /opt/google_engine/appcfg.py update /opt/goagent/server/python</pre> <p>输入 email 和 password 提交</p> <p>======</p> <p>客户端使用</p> <p><code>/opt/goagent/local</code> 目录下有文件 <code>proxy.ini</code></p> <p>打开修改appid</p> <p>(从别处得知需要将profile改成 google_hk，如果是 google_cn 还是不能用)</p> <pre>[gae]
appid = yourappid
password = 
path = /2
profile = google_hk
mode = https
hosts = [google_hk]hosts</pre> <p>运行 proxy.py 就可以去阿根廷</p> <p> </p> <p>创建快捷方式</p> <pre>sudo gedit /usr/share/applications/goagent.desktop</pre> <pre>[Desktop Entry] 
Name = goagent
Comment = a proxy tool
Exec = /opt/goagent/local/proxy.py
Icon = /opt/goagent/local/goagent.png 
Terminal = true
Type = Application
Categories = Application;Development;</pre> <p>现在需要给快捷方式以sudo超级用户方式运行，否则点击会一闪而过。当然你也可以不让他在终端显示，只需要将Terminal=true改成Terminal=false</p> <pre>sudo chmod 777 /opt/goagent/local/proxy.py</pre> <p>关于switchy等配置 。。。<br/> goagent 包中已经有 switchy google浏览器插件 直接托放<br/> go google ...</p> <ul> <li>https://code.google.com/p/goagent/</li> <li>https://appengine.google.com/</li> <li>https://developers.google.com/appengine/downloads</li> <li>http://www.samabox.com/projects/chrome/switchy</li> <li>http://equation85.github.io/blog/goagent-config/</li> </ul></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/gae/">gae</a></li> <li><a href="/tag/goagent/">goagent</a></li> <li><a href="/tag/google/">google</a></li> <li><a href="/tag/python/">python</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-12-02T16:08:42.000Z">December 2, 2013</time> <h1><a href="/post/google-image-proxy/">Google 图片代理</a></h1> </header> <section class="post-main"><p>谷歌图片代理</p> <p>现在目测还用不上 先留着(目测能绕过各个网站的图片盗链!目测还能是墙外！)<br/> <img src="/img/css-gaussian-blur/1.png"></p> <p><img alt="" src="http://images2-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://lh6.googleusercontent.com/-t5G3Q-eKBT4/AAAAAAAAAAI/AAAAAAAAABI/_y1qBwmc_GA/s265-c-k-no/photo.jpg&amp;container=focus&amp;gadget=a&amp;rewriteMime=image/*&amp;refresh=31536000&amp;resize_h=150&amp;resize_w=150&amp;no_expand=1&amp;google+.gif"/><br/> 图片地址：</p> <pre>&lt;img alt="" src="http://images2-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://www.google.com/images/srpr/logo11w.png&amp;amp;container=focus&amp;amp;gadget=a&amp;amp;rewriteMime=image/*&amp;amp;refresh=31536000&amp;amp;resize_h=150&amp;amp;resize_w=150&amp;amp;no_expand=1&amp;amp;google.gif" /&gt;</pre> <pre>&lt;img alt="" src="http://images2-focus-opensocial.googleusercontent.com/gadgets/proxy?url=https://lh6.googleusercontent.com/-t5G3Q-eKBT4/AAAAAAAAAAI/AAAAAAAAABI/_y1qBwmc_GA/s265-c-k-no/photo.jpg&amp;amp;container=focus&amp;amp;gadget=a&amp;amp;rewriteMime=image/*&amp;amp;refresh=31536000&amp;amp;resize_h=150&amp;amp;resize_w=150&amp;amp;no_expand=1&amp;amp;google+.gif" /&gt;</pre> <p>并非用图片的原始地址，也不是用 css 来缩小的，也就是 Google 自己去原始地址抓取后，缩放一下再传过来。看到地址里有两个参数值得注意</p> <ul> <li>一个是 <code>url</code>，看样子原始图片地址了，我随便找其它的图片地址替换一下，结果提示下载 p.txt的文件，保存，改扩展名为 jpg，果然是张图片。</li> <li>还有把 <code>resize_h</code>，看来是缩放图片的宽度，改为 0 试试，再下载，果然表示不缩放，对比一下原始图片的 md5，一样的。</li> </ul> <p> </p> <p> </p> <p>js 将页面图片通过google代理</p> <pre>javascript:(function(){
              prefix = "https://images2-focus-opensocial.googleusercontent.com/gadgets/proxy?url="; 
              suffix = "&amp;container=focus&amp;gadget=a&amp;no_expand=1&amp;resize_h=0&amp;rewriteMime=image%2F*"; 
              images = document.getElementsByTagName("img"); 
              for (var i = 0; i &lt; images.length; i++) {     
                    if (images[i].src.indexOf(prefix) == -1) {         
                         images[i].src = prefix + encodeURIComponent(images[i].src) + suffix;     
                    } 
              }
            })();</pre> <p>链接：</p> <ul> <li>http://qixinglu.com/post/google_image_proxy.html</li> </ul></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/google/">google</a></li> <li><a href="/tag/images/">images</a></li> <li><a href="/tag/javascript/">javascript</a></li> <li><a href="/tag/proxy/">proxy</a></li> </ul> </footer> </article> <menu class="page"> <li class="page-prev"> <a href="/page/6/" title="Previous">Prev</a> </li> <li class="page-next"> <a href="/page/8/" title="Next">Next</a> </li> </menu> </main> <footer class="foot"> <div>&copy;2017 iaceob</div> </footer> </body> </html>