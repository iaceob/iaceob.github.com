<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.svg"> <title>記修復 ssh - 生物烯丙菊</title> <link rel="stylesheet" href="/css/style.css"> </head> <body> <header class="head"> <h1 class="head-title"><a href="/">生物烯丙菊</a></h1> <h3 class="head-description"> <span class="flashlight">达文西手电筒</span> </h3> <ul class="head-nav"> <li><a href="/">Home</a></li> <li><a href="/archives/">Archives</a></li> <li><a href="http://blog.3u3.me">幾文山</a></li> </ul> </header> <main class="main"> <article class="post"> <header class="post-head"> <time datetime="2015-01-16T23:41:25.000Z">January 16, 2015</time> <h1>記修復 ssh</h1> </header> <section class="post-main"><p>服務器很長時間沒重啓了, 然後剛剛重啓了下.</p> <p>重啓後 ssh 不能連接, 一直報</p> <pre>ssh: connect to host localhost port 22: Connection refused</pre> <p>查閱各種資料都說是 ssh 服務未啓動, 解決方案大都是說重新安裝下 ssh-server , 然後重裝數次, 重啓數次任然無法解決.</p> <p>但是在查看進程的時候都又 ssh 服務的啓動, 查看網絡的時候發現 tcp 22 端口並未被 ssh 啓動, 服務啓動了, 但是端口沒監聽.</p> <p>後未直接通過 service 命令啓動 ssh 服務, 而是直接啓動運行 /usr/sbin/sshd 這次啓動報錯了, 說在 /etc/ssh/sshd_config 中又錯誤的配置, 恩 錯誤的信息忘了記錄了.</p> <p>錯誤的是這兩行</p> <pre>AllowUsers:atk ibd
AllowGroups:atk ibd ssh admin</pre> <p>atk ibd 是系統的賬戶</p> <p>不知道 ssh 默認的配置文件是否有這個配置, 看這名字意思大概就是 允許的賬戶和允許的用戶組了, 後註釋了這兩行重新啓動 ssh 服務, 就可以正常連接了.</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/linux/">linux</a></li> <li><a href="/tag/ssh/">ssh</a></li> <li><a href="/tag/sshd/">sshd</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> </main> <footer class="foot"> <div>&copy;2017 iaceob</div> </footer> </body> </html>