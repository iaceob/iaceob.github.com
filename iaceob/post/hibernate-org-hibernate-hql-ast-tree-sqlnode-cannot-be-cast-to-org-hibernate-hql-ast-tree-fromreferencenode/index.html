<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.svg"> <title>hibernate org.hibernate.hql.ast.tree.SqlNode cannot be cast to org.hibernate.hql.ast.tree.FromReferenceNode - 生物烯丙菊</title> <link rel="stylesheet" href="/css/style.css"> </head> <body> <header class="head"> <h1 class="head-title"><a href="/">生物烯丙菊</a></h1> <h3 class="head-description"> <span class="flashlight">达文西手电筒</span> </h3> <ul class="head-nav"> <li><a href="/">Home</a></li> <li><a href="/archives">Archives</a></li> <li><a href="http://blog.3u3.me">幾文山</a></li> </ul> </header> <main class="main"> <article class="post"> <header class="post-head"> <time datetime="2013-10-23T01:30:44.000Z">October 23, 2013</time> <h1>hibernate org.hibernate.hql.ast.tree.SqlNode cannot be cast to org.hibernate.hql.ast.tree.FromReferenceNode</h1> </header> <section class="post-main"><p>项目开发中遇到了bug，报错信息就如标题所显示</p> <pre>org.hibernate.hql.ast.tree.SqlNode cannot be cast to org.hibernate.hql.ast.tree.FromReferenceNode</pre> <p>log4j 在解析hql之前也有个报错信息</p> <pre>DEBUG - Keyword  'Order' is being interpreted as an identifier due to: expecting IDENT, found 'Order'</pre> <p>出现这个错误是因为hql中某个字符和数据库的关键字冲突造成的，项目中订单的实体类名是 Order 写的 hql 如下</p> <pre>select new Order(order.orderid, order.ordername) from Order as order;</pre> <p>搭建之初并没有考虑到关键字的问题甚至在遇到这个错误的时候还是没能发觉是什么地方出了问题，不禁一番感慨。。。。</p> <p>log4j都提示了错误 还是没看到 。。。</p> <p>order 是数据库的关键字 所以这里的订单实体类就不能用 Order 了。</p> <p>要修改的并不是 as 后面的order，那个order只是一个别名，hibernate将hql转化的时候会再次重命名所以不用担心这个会和关键字冲突，需要修改的是Order实体类名。</p> <p>修改了Order为Order_T</p> <p>最后hql为</p> <pre>select new Order_T(order.orderid, order.ordername) from Order_T as order;</pre> <p>问题解决了。</p> <p> </p> <p>-----</p> <p>要学的真的很多 多注意写细节。。。。</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/hql/">hql</a></li> <li><a href="/tag/java/">java</a></li> <li><a href="/tag/keyword/">keyword</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> </main> <footer class="foot"> <div>&copy;2017 iaceob</div> </footer> </body> </html>