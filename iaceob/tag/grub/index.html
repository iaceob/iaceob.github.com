<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.svg"> <title>grub - 生物烯丙菊</title> <link rel="stylesheet" href="/css/style.css"> </head> <body> <header class="head"> <h1 class="head-title"><a href="/">生物烯丙菊</a></h1> <h3 class="head-description"> <span class="flashlight">达文西手电筒</span> </h3> <ul class="head-nav"> <li><a href="/">Home</a></li> <li><a href="/archives">Archives</a></li> <li><a href="http://blog.3u3.me">幾文山</a></li> </ul> </header> <main class="main"> <article class="post"> <header class="post-head"> <time datetime="2013-10-19T12:45:22.000Z">October 19, 2013</time> <h1><a href="/post/install-ubuntu-no-boot-items/">安装ubuntu后没有开机启动项</a></h1> </header> <section class="post-main"><p>又一次安装ubuntu。。。</p> <p>几乎每次安装ubuntu都会出现问题。。。。。</p> <p>又重装了好多次。。。</p> <p>这次的问题是ubuntu安装完成后没有直接进入ubuntu的开机启动项</p> <p>安装ubuntu的时候也选择了开机是从ubuntu那盘启动的的，但是重启后还是直接进入了windows的启动界面。。。</p> <p>试了好多方式，把ubuntu那分区成为激活状态，任然无效。</p> <p>因为使用的是硬盘安装方式 使用了grub，原本安装了ubuntu之后的启动顺序应是 开机直接进入ubuntu启动项如果要进入windows系统在ubuntu进入grub选择windows启动</p> <p>这里并不是，而是没有进入ubuntu的启动项而是直接进入了windows的启动项。</p> <p>ubuntu也装了好多次还是不行。</p> <p>有说要在grub命令中修改ubuntu为第一启动项。。。。。可是。。。。试了几次。。。果然还是不行</p> <p>后来找到一方法是直接从grub启动ubuntu就成。</p> <p>既然直接从windows进入的，那么就从windows进入grub然后从grub进入ubuntu</p> <p>具体修改如下 (修改menu.lst)</p> <p>在menu.lst最后添加如下：</p> <pre>title Boot Ubuntu 13.04
root (hd1,0)
kernel (hd1,0)/vmlinuz root=/dev/sda1 ro quiet splash
initrd (hd1,0)/initrd.img</pre> <p>root(hd1,0) // 从(hd1,0)分区启动</p> <p>之后便是去找到ubuntu的启动文件启动ubuntu。</p> <p> </p> <p>也试了几次总算是把ubuntu启动了， 这里分区一定要真确否则就不能真确的找到ubuntu的启动文件 这样ubuntu还是不能启动 这里的<code>(hd1,0)</code>和<code>/dev/sda1</code>根据自己本机的实际情况填写</p> <p> </p> <p>不过这里还是从windows的启动项启动的，也可以直接从grub启动 然后选择是从windows启动还是ubuntu或者其他。</p> <p> </p> <p> </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/boot/">boot</a></li> <li><a href="/tag/grub/">grub</a></li> <li><a href="/tag/grub4dos/">grub4dos</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <article class="post"> <header class="post-head"> <time datetime="2013-05-27T21:10:15.000Z">May 27, 2013</time> <h1><a href="/post/after-formatting-ubuntu-windows-can-not-start/">格式化ubuntu后windows无法启动</a></h1> </header> <section class="post-main"><p>电脑上安装了xp和ubuntu双系统，但是在操作ubuntu的时候出了问题，导致ubuntu不能登陆等问题，准备重新安装下，也出现了错误，提示分区有问题，然后到xp系统将ubuntu分区格式化了，重启后傻眼了，提示报错了，错误如下：</p> <p>error: unknow filesystem</p> <p>grub rescuse&gt;_</p> <p><img src="/img/after-formatting-ubuntu-windows-can-not-start/1.jpg"></p> <p>也许会有人和我一样出现这样的问题，解决了先，下面是一些解说内容，和解决办法(当然大多都是搜索出来的)，分享下：</p> <p> </p> <p>原因：</p> <p>安装Ubuntu之后MBR里的内容就被改了，指向了Ubuntu的 Grub，Grub里同时有Win和Ubuntu的引导，而格式化Ubuntu的时候Grub也一同格掉了，结果就是MBR找不到引导的系统而出错。知道原理了就有解决办法，既然MBR有错误，那只要恢复MBR里的内容就OK。<br/> 解决：</p> <p>如果你的电脑安装了Windows和Linux双系统，如果在下直接格式化或删除Linux系统，就不能正常启动Windows系统了。就要使用其他方法来恢复MBR或用Windows下修复mbr的软件:MbrFix.exe来修复。<br/> 下载mbrfix工具<br/> <a href="http://pan.baidu.com/share/link?shareid=489443&amp;uk=1409985539" target="_blank">点击这里</a><br/> mbrfix工具使用说明<br/> 平台： dos、cmd、Windows NT, Windows 2000, Windows XP, Windows Server 2003 and Windows PE.<br/> 官方说明：http://www.sysint.no/nedlasting/mbrfix.htm<br/> 使用方法：<br/> MbrFix /drive &lt;num&gt; driveinfo 显示硬盘信息<br/> MbrFix /drive &lt;num&gt; drivesize 在mb区返回有用驱动<br/> MbrFix /drive &lt;num&gt; listpartitions 显示分区信息<br/> MbrFix /drive &lt;num&gt; savembr &lt;file&gt; 保存MBR 到分区<br/> MbrFix /drive &lt;num&gt; restorembr &lt;file&gt; 从分区写入MBR<br/> MbrFix /drive &lt;num&gt; fixmbr {/vista} 更新 MBR code 用于W2K/XP/2003 or Vista<br/> MbrFix /drive &lt;num&gt; clean 删除所有分区的MBR<br/> MbrFix /drive &lt;num&gt; readsignature {/byte} 从MBR读取签名信息，即标记<br/> MbrFix /drive &lt;num&gt; writesignature &lt;hex&gt; 往MBR写入标记<br/> MbrFix /drive &lt;num&gt; generatesignature 磁盘签名生成MBR中<br/> MbrFix /drive &lt;num&gt; readstate 读取位置在 byte 0x1b2 在MBR中<br/> MbrFix /drive &lt;num&gt; writestate &lt;state&gt; 写入到位置于 byte 0x1b2 在MBR中&lt;<br/> MbrFix /drive &lt;num&gt; readdrive &lt;startsector&gt; &lt;sectorcount&gt; &lt;file&gt; 保存分区到文件<br/> MbrFix /drive &lt;num&gt; /partition &lt;part&gt; fixbootsector &lt;os&gt; 从 boot sector 更新 Boot code<br/> MbrFix /drive &lt;num&gt; /partition &lt;part&gt; getpartitiontype 获得分区类型<br/> MbrFix /drive &lt;num&gt; /partition &lt;part&gt; setpartitiontype &lt;typenum&gt; 设置分区类型<br/> MbrFix /drive &lt;num&gt; /partition &lt;part&gt; setactivepartition 设置活动分区<br/> MbrFix /drive &lt;num&gt; getactivepartition 获取活动分区<br/> MbrFix volumeinformation driveletter 获取分区卷信息<br/> MbrFix flush {driveletter(s)} 刷新文件到分区<br/> MbrFix listpartitiontypes 分区列表类型</p> <p>示例，<br/> 我要修复C盘的xp引导(NT)，进入软件所在目录，<br/> MBRFIX /drive 0『(1、2、3等)』 driveinfo 查看你的硬盘信息，通过容量断定是不是你要修复mbr的U盘或硬盘<br/> MBRFix /drive 0 fixmbr /yes<br/> vista mbr修复 MBRFix /drive 0 fixmbr /vista。 注：这里0是第一块主硬盘主分区。<br/> ok，温馨提示下，在vista下会用新的bootmgr信息代替NT的引导信息，谨慎。</p> <p>我使用的时候是在winpe下使用的，将mbrfix.exe拷贝到c:<br/> cmd<br/> c:mbrfix /drive 0 fixmbr /yes</p> <p>前面的c:需要保留的，或者直接进入c:目录下面，执行。<br/> 强调这工具是用来修复硬盘位置0簇512字节的引导信息</p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/grldr/">grldr</a></li> <li><a href="/tag/grub/">grub</a></li> <li><a href="/tag/linux/">linux</a></li> <li><a href="/tag/mbrfix/">MbrFix</a></li> <li><a href="/tag/ubuntu/">ubuntu</a></li> </ul> </footer> </article> <menu class="page"> </menu> </main> <footer class="foot"> <div>&copy;2017 iaceob</div> </footer> </body> </html>