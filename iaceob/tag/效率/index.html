<!doctype html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.svg"> <title>效率 - 生物烯丙菊</title> <link rel="stylesheet" href="/css/style.css"> </head> <body> <header class="head"> <h1 class="head-title"><a href="/">生物烯丙菊</a></h1> <h3 class="head-description"> <span class="flashlight">达文西手电筒</span> </h3> <ul class="head-nav"> <li><a href="/">Home</a></li> <li><a href="/archives/">Archives</a></li> <li><a href="http://blog.3u3.me">幾文山</a></li> </ul> </header> <main class="main"> <article class="post"> <header class="post-head"> <time datetime="2013-06-11T02:55:42.000Z">June 11, 2013</time> <h1><a href="/post/hibernate-database-query-efficiency/">hibernate数据库查询效率</a></h1> </header> <section class="post-main"><p> 不知道使用hibernate的人有没有听说过hibernate的效率很低。 </p> <p> 可能标题使用查询效率的话有点大了，也许hibernate可能在使用的时候效率会比jdbc的方式低吧毕竟jdbc是直接操作数据库的，而hibernate则将sql封装，这样即增加了编码的复杂性也相应的对效率有影响。 </p> <p> 不过这里是使用hibernate，深处的问题暂且不论，谈谈使用的时候如何来加快hibernate的效率： </p> <p> 在hibernate中，用hql语句查询实体类，采用list方法的返回结果为一个List，这中hql只需要from [实体类]，hibernate就知道你要查询的是哪个数据库，然后查出相应的数据，使用很方便，但是hibernate默认是查询全部数据的也就是select * from xxx; 这种方式就是查询某个表下的所有的数据，事实上是没有必要的，比如一个新闻的展示页面，并不需要查询新闻的内容，但是使用默认的方式新闻的内容等一些展示页面的信息并不需要查询，但是hibernate给查询出来了，用不上，而且通常一个新闻的内容很长，那么hibernate废了这么长的时间查询出了你不需要的内容，这样就会感觉hibernate的效率很低，查询的速度慢。 </p> <p> 既然只需要查部分字段，那么就在hibernate查询之前告诉它即可，在写hql的时候指定需要查询的字段，书写方式如下 </p> <pre>
	String hql = "select new Entity(Field1,Field2,Field3) from Entity";
</pre> <p> 写hql的时候new了一个实体类并且给出需要查询的字段，那么这个实体类中就需要有相应的构造方法。 </p> <pre>
	public Entity(int Field1,String Field2,String Field3){
	     this.Field1 = Field1;
	     this.Field2 = Field2;
	     this.Field3 = Field3;
	}
</pre> <p> </p> <p> 这样hibernate查询的时候就会按照指定的字段进行查询，大大的节约了查询的时候，而且查询出来的字段都是需要使用的。 </p> <p> 奉上道听途说的一句，也不知道是不是真的：hibernate作者说那些认为hibernate效率低的人是因为他没有学会用hibernate。 </p> <p> </p> <p> 未添加字段前项目启动时间 </p> <p> <img src="/img/hibernate-database-query-efficiency/1.png"> </p> <p> 添加字段后项目启动时间 </p> <p> <img src="/img/hibernate-database-query-efficiency/3.png"> // 添加后的查询语句 </p> <p> </p> <p> 要学的还很多。 </p></section> <footer class="post-foot"> <ul class="post-tags"> <li><a href="/tag/hibernate/">hibernate</a></li> <li><a href="/tag/hql/">hql</a></li> <li><a href="/tag/java/">java</a></li> <li><a href="/tag/效率/">效率</a></li> </ul> </footer> </article> <menu class="page"> </menu> </main> <footer class="foot"> <div>&copy;2017 iaceob</div> </footer> </body> </html>