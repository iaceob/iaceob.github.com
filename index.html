<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><title>幾文山</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">幾文山</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="https://iaceob.3u3.me" class="head-nav__link">生物烯丙菊</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2017-05-04T14:19:50.000Z" class="post__time">May 4, 2017</time><h1 class="post__title"><a href="/post/moan-part-7/">意外</a></h1></header><div class="post__main echo"><p>应该说, 到现在, 所发生的一切都是一连串的意外所产生的.</p>
<p>现在还不想回忆这些意外, 真的, 太多了, 以至于我无法说清; 而且也还没到该回忆的时候 (年长六年那个就不知道了_(:3 」∠ )_ ); 鬼知道还会有多少意外.</p>
<p>前些天, 就很意外的买了本书, 就在今天, 就已经全部看完了. </p>
<p><a href="https://book.douban.com/subject/26242908/" target="_blank" rel="external">如果世上不再有猫</a></p>
<p>很惭愧, 我无法写出独到的见解; 每个人都有自己的见解和感受, 如果你想了解, 你就应该自己去做.</p>
<p>当然, 意外也包括来自生活中的惊喜, 很喜欢在你毫无预兆的情况下有一个未知的惊喜在等着你, 那么先让自己成为那个发出惊喜的人吧 ~</p>
<p>还有, 不知道会不会再一次意外的回到最初的地方.</p>
<p>又停下来了.</p>
<p>说不上的感觉.</p>
<p>就这样.</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=32317208&auto=0&height=66">



</iframe></div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/moan/" class="post__tag__link">moan</a></li></ul><a href="/post/moan-part-7/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-05-04T13:58:57.000Z" class="post__time">May 4, 2017</time><h1 class="post__title"><a href="/post/if-this-world-cat-disappears/">世界から貓が消えたなら</a></h1></header><div class="post__main echo"><p>“人类和猫共同生活了一万年, 所以, 长时间和猫想处, 就会渐渐了解, 不是人类饲养猫, 只是猫愿意陪伴在人类身旁而已.”</p>
<hr>
<p>“你一直都戴那只表, 有什么特别意义吗?”<br>“那是你爸第一次送我的礼物.”<br>“原来是这样.”<br>“那是你爸用他搜集的古董表的零件组装的手表.”<br>“原来他会做这种事.”<br>“他会做这种事.”<br>老妈说完, 像少女般笑了起来.<br>“你爸上个星期来看我时, 我说手表不动了, 他没有吭气, 就带回家了. 原来他打算拿回去修理.”<br>“但没必要偏偏现在修理啊.”<br>“没关系. 你在这里陪我, 我当然高兴, 但有时候人会用不同的方式表达内心的爱.”<br>“是这样吗?”<br>“就是这样啊.”</p>
<hr>
<p>“没错. 我猜想由你内心我数个小小的后悔, 想要这么做, 用另一种方式活到今天, 就会形成我现在这个样子. 这事某种理想, 又同时带有魔鬼的性质, 虽然想要成为那样的自己, 却又无法真的做到, 是离自己最近的遥远存在. 差不多就是这样吧.”<br>“我做的决定对吗?”<br>“请不要问我.”<br>“临终的时候会后悔吗?”<br>“一定会. 我还想活下去! 想要把魔鬼找回来! 你应该会有这种想法. 人类总是从自己选择的人生看向自己没有选择的另一种人生, 感到羡慕, 感到后悔.”</p>
<hr>
<p>但是, 当我获得可以让某些东西从这个世界消失的权利后, 发现这种后悔正是一种美, 因为这正是我活过的证明.<br>我不会再让任何东西从这个世界消失.<br>也许我会在临死之际后悔, 为了活命, 可以让猫或是任何东西消失. 但是, 及时如此也无妨, 反正我的人生本就充满后悔.<br>原以为此生活出了自我, 但其实并没有活出自我.<br>我的人生, 终究没有找到自我.<br>无数的失败和后悔, 没有完成的梦想, 相见的人, 想吃的食物, 和想去的地方. 我将带着这些无数的东西走向死亡, 但是, 这也无妨, 我觉得现在的自己很好. 我很庆幸自己走到了这里, 而不是走到不是这里的另一个地方.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/book/" class="post__tag__link">book</a></li></ul><a href="/post/if-this-world-cat-disappears/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-04-02T09:27:33.000Z" class="post__time">April 2, 2017</time><h1 class="post__title"><a href="/post/moan-part-6/">10 年後この木の下で</a></h1></header><div class="post__main echo"><p>不出意外的又踩到屎.</p>
<p>是說現在的企業, 公司只會提出很前衛的理念和想法, 但是去實作的人全是渣?</p>
<p>不談, 不想談, 越是追究, 到最後變成了自己看什麼都不爽, 看什麼都不舒服.</p>
<p>還是頭一次公休假期沒有回家了.</p>
<p>發現自己的 <code>阿Q精神</code> 最近越來越爆棚, 恩, 總感覺這一切都將慢慢的好起來, 變的越來越不悲觀. 其實所有的問題又一次如以前一樣被深深地埋了起來, 又一次選擇了逃避.</p>
<p>再一次燃起熱血準備做一件事, 對, 就是在今天, 不出意外的忽然間又產生了 <strong>我特麼還要不要做下去</strong> 的念頭.</p>
<p>// 不想放棄, 已經為了這個拋棄了好多了, 怎麼能就這樣放棄.</p>
<p>喜歡的事物很多, 慢慢的, 多了好興趣, 對閱讀書本漸漸多了很多耐心, 不會顯得煩躁, 拿起筆的次數變多, 願意拿更多的時間放在更加真實的現在.</p>
<p>可惜, 說要學習日語到現在都還沒什麼進展, 當然和這次又踩到屎有關.</p>
<p>接下來,</p>
<p>準備入手 Chromebook , 看好久了. 還是很心動.</p>
<p>等待夏末的到來~</p>
<p>還有昂.</p>
<p>做下去, 繼續做下去, 我到要看看自己到底能維持做一件事能有多久.</p>
<p>歌單該換啦, 老實說, 人真的會在潛移默化中改變, 歌單最早的歌曲已經有 3 Year+ 現在每次打開歌單做的第一件事請就是 滑 滑 滑, 直到最近新加的曲子.</p>
<blockquote>
<p>種一顆樹最好的時間是十年前, 其次是現在.</p>
</blockquote>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/moan/" class="post__tag__link">moan</a></li></ul><a href="/post/moan-part-6/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-03-19T13:59:30.000Z" class="post__time">March 19, 2017</time><h1 class="post__title"><a href="/post/moan-part-5/">我尽力了!</a></h1></header><div class="post__main echo"><p><img src="https://raw.githubusercontent.com/iaceob/gallery/master/moan/moan-clean-before-1.jpg" alt="Before"></p>
<p><img src="https://github.com/iaceob/gallery/blob/master/moan/moan-clean-after-1.jpg?raw=true" alt="After"></p>
<p>手疼.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/moan/" class="post__tag__link">moan</a></li></ul><a href="/post/moan-part-5/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-03-18T08:10:28.000Z" class="post__time">March 18, 2017</time><h1 class="post__title"><a href="/post/jfinal-restful/">JFinal RESTful</a></h1></header><div class="post__main echo"><p>在阅读之前, 先参考</p>
<ol>
<li><a href="http://www.jfinal.com/project/1" target="_blank" rel="external">JFinal 极速开发框架</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="external">RESTful API 设计指南</a></li>
<li><a href="https://www.oschina.net/question/552061_249032" target="_blank" rel="external">JFinal实现严格的Restful</a></li>
</ol>
<p>当看完这些之后, 大概应该就能理解, RESTful 的规范, 以及 JFinal 的路由实现方式.</p>
<p>首先, 先看下 JFinal 目前的 RESTful 风格路由实现.</p>
<p>翻开 <code>com.jfinal.core.ActionMapping#getAction</code> 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Support four types of url</span><br><span class="line"> * 1: http://abc.com/controllerKey                 ---&gt; 00</span><br><span class="line"> * 2: http://abc.com/controllerKey/para            ---&gt; 01</span><br><span class="line"> * 3: http://abc.com/controllerKey/method          ---&gt; 10</span><br><span class="line"> * 4: http://abc.com/controllerKey/method/para     ---&gt; 11</span><br><span class="line"> * The controllerKey can also contains "/"</span><br><span class="line"> * Example: http://abc.com/uvw/xyz/method/para</span><br><span class="line"> */</span></span><br><span class="line"><span class="function">Action <span class="title">getAction</span><span class="params">(String url, String[] urlPara)</span> </span>&#123;</span><br><span class="line">  Action action = mapping.get(url);</span><br><span class="line">  <span class="keyword">if</span> (action != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> action;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// --------</span></span><br><span class="line">  <span class="keyword">int</span> i = url.lastIndexOf(SLASH);</span><br><span class="line">  <span class="keyword">if</span> (i != -<span class="number">1</span>) &#123;</span><br><span class="line">    action = mapping.get(url.substring(<span class="number">0</span>, i));</span><br><span class="line">    urlPara[<span class="number">0</span>] = url.substring(i + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> action;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里有说明, 目前 JFinal 支持的路由格式, 在此之外, JFinal 还提供了一个 <code>Restful</code> 的拦截器, 来达到严格的 RESTful url 风格实现.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Invocation 中添加 Method method</span><br><span class="line"> *</span><br><span class="line">  The standard definition is as follows:</span><br><span class="line">  index - GET - A view of all (or a selection of) the records</span><br><span class="line">  show - GET - A view of a single record</span><br><span class="line">  add - GET - A form to post to create</span><br><span class="line">  save - POST - Create a new record</span><br><span class="line">  edit - GET - A form to edit a single record</span><br><span class="line">  update - PUT - Update a record</span><br><span class="line">  delete - DELETE - Delete a record</span><br><span class="line"> *</span><br><span class="line"> * GET    /user      ---&gt;  index</span><br><span class="line"> * GET    /user/id    ---&gt;  show  </span><br><span class="line"> * GET    /user/add    ---&gt;  add</span><br><span class="line"> * POST    /user      ---&gt;  save</span><br><span class="line"> * GET    /user/edit/id  ---&gt;  edit</span><br><span class="line"> * PUT    /user/id    ---&gt;  update</span><br><span class="line"> * DELETE  /user/id    ---&gt;  delete</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Restful</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当看完这些之后, 进入到正题.</p>
<p>首先, JFinal 基本上已经可以很好的实现 RESTful 风格的 url 了, 但是仍然有不足, 无论是默认的路由实现, 或者是 Restful 拦截器的实现, 仍然无法做到全可控的 RESTful 实现.<br>Restful 拦截器的实现实际上是匹配链接以及 Request method, 然后进行 forward 到相应的 action 中.</p>
<p>例如, 参考链接 <a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="external">RESTful API 设计指南</a> 文章中的</p>
<blockquote>
<p>DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物</p>
</blockquote>
<p>就没办法通过 Restful 拦截器来实现了.</p>
<p>那么, 所有问题都抛出来了.</p>
<p>因此, 这里要说的就是, 把 JFinal 的路由机制给改了下, 达到完美兼容 RESTful 链接, 并且保留 JFinal 的默认实现.</p>
<p>具体实现代码已提交至 <a href="https://github.com/iaceob/jfinal/tree/restful" target="_blank" rel="external">iaceob/jfinal</a></p>
<p>先不讨论怎么实现, 其实原理也很简单, 看看代码很容易理解. 这里主要说说使用方式, 以及一些问题.</p>
<p>使用的时候非常简单, 首先在你的 AppConfig.configConstant 中, 设置开启 RESTful 模式.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configConstant</span><span class="params">(Constants constants)</span> </span>&#123;</span><br><span class="line">    constants.setRestful(<span class="keyword">true</span>);</span><br><span class="line">    constants.setXxx();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当设置了 <code>constants.setRestful(true);</code> 之后, 路由解析就是 RESTful 风格实现的, 默认是 false, 也就是目前 JFinal 自身的路由实现.</p>
<p>接下来就是定义你的 RESTful 链接格式就好, 下面是一个测试案例.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jfinal.test.restful.test.ctl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.jfinal.core.ActionKey;</span><br><span class="line"><span class="keyword">import</span> com.jfinal.core.Controller;</span><br><span class="line"><span class="keyword">import</span> com.jfinal.plugin.activerecord.Record;</span><br><span class="line"><span class="keyword">import</span> com.jfinal.restful.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by iaceob on 2017/3/17.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZooCtl</span> <span class="keyword">extends</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;Record&gt; <span class="title">getAttrs</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Record&gt; rets = <span class="keyword">new</span> ArrayList&lt;Record&gt;();</span><br><span class="line">        Enumeration&lt;String&gt; ens = <span class="keyword">super</span>.getAttrNames();</span><br><span class="line">        <span class="keyword">while</span> (ens.hasMoreElements()) &#123;</span><br><span class="line">            String key = ens.nextElement();</span><br><span class="line">            rets.add(<span class="keyword">new</span> Record().set(key, <span class="keyword">super</span>.getAttr(key)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Record <span class="title">buildRet</span><span class="params">(String intro)</span> </span>&#123;</span><br><span class="line">        Record ret = <span class="keyword">new</span> Record();</span><br><span class="line">        ret.set(<span class="string">"intro"</span>, intro)</span><br><span class="line">                .set(<span class="string">"attrs"</span>, <span class="keyword">this</span>.getAttrs())</span><br><span class="line">                .set(<span class="string">"paras"</span>, <span class="keyword">super</span>.getParaMap());</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(<span class="string">"/zoo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">list</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"zoo list"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(value = <span class="string">"/zoo"</span>, method = Method.POST)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addZoo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"add zoo"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(<span class="string">"/zoo/:id"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getZoo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"get zoo by id"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(value = <span class="string">"/zoo/:id"</span>, method = Method.PUT)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">putZoo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"put zoo by id"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(value = <span class="string">"/zoo/:id"</span>, method = Method.PATCH)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">patchZoo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"patch zoo by id"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(value = <span class="string">"/zoo/:id"</span>, method = Method.DELETE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteZoo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"delete zoo by id"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(<span class="string">"/zoo/:id/animals"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">animals</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"show zoo animals"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(<span class="string">"/zoo/:zooId/animal/:animalId"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAnimal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"show zoo animal by id"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ActionKey</span>(<span class="string">"/zoo/:zid/animal2/:aid"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getAnimal2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.renderJson(<span class="keyword">this</span>.buildRet(<span class="string">"show zoo animal by id, 2"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用时也是使用 <code>@ActionKey</code> 注解, url 中的值通过 <code>:name</code> 来标识, ActionKey 注解中的另外一个参数就是绑定相应的请求 method.</p>
<p>获取参数也未作改变, 表单传递的参数仍然通过 <code>getPara()</code> 来获取, 使用方式详细见 JFinal 文档.</p>
<p>但是需要注意的是:</p>
<ol>
<li><p>开启 RESTful 模式后, <code>getPara()</code> 方法按索引取值的方法将失去效果<br>例如, <code>/zoo/:id/1-3</code> 若这样的请求则会直接返回 404 错误, 因为 RESTful 模式采用的匹配规则较严格(可查看代码实现, 或对该处进行修改令其支持), 另外若是采用 RESTful 风格链接, 应该也不会使用此方式传参.</p>
</li>
<li><p>存放在 url 中的参数标识无法通过 <code>getPara()</code> 取值.<br>若要获取 url 中指定的参数值, 需要通过 <code>getAttr()</code> 获取, 例如 <code>/zoo/:id</code> 获取这个 id 时, 使用 <code>getAttr(&quot;id&quot;)</code>.</p>
</li>
<li><p>RESTful 模式与非 RESTful 的 ActionKey 是不可共用的.<br>这个描述可能比较模糊, 但是要表达的意思是, 如果 ActionKey 中的 url 是采用 RESTful 风格写的, 但是却没有开启 RESTful 模式, 就会发生问题, 非 RESTful 模式是不去分析 url 中参数的.</p>
</li>
<li><p>无需再使用 POST GET 拦截器<br>JFinal 提供了 GET POST 拦截器, 用以指定某个路由只能某中请求, 但是开启 RESTful 模式后, 在路由匹配是就已经限定了指定的 method 访问, 因此无需再使用 <code>@Before(POST.class)</code> 这样的代码.</p>
</li>
</ol>
<p>使用方式大抵如此, 剩下还有一些可能会令人不爽的小问题.</p>
<ol>
<li><p>使用 <code>getAttr()</code> 获取 url 中参数时, 获取到的值都是 String 类型.<br>因 <code>HttpServletRequest</code> 自身的设计, 在解析完 url 后无法将值写入到 <code>parameter</code> 中, 因此无法使用 JFinal 提供的 <code>getPara()</code> 取值. 后续也考虑过做一个类型自动识别, 但是最终抛弃了, 在不同的系统中, 参数的类型都不同, 自动识别是不靠谱的, 因此建议使用中, 在获取这个参数时都写一个 <code>validator</code> 对这个值进行验证, <code>controller</code> 中就可以对该值进行强转类型.</p>
</li>
<li><p>性能问题<br>也不要想得太过与悲观, 这里说的性能只是相对于 JFinal 自身的路由实现. JFinal 的路由实现非常简单, 甚至可以就简单的看成是字符串匹配, 但是这里的 RESTful 模式, 匹配时使用了正则, 因此效能肯定会比 JFinal 自身实现要来的低一些. 后续会做相关方面性能测试.</p>
</li>
<li><p>非插拔式<br>意思是, 并非提供扩展, 而是通过修改内核实现, 其原因其实看看 JFinal 提供 <code>Restful</code> 拦截器就知道了 = =, 以及 JFinal 的极简的设计缘故. 首先, JFinal 的路由实现, 路由最初加载进来时, 就通过 ActionMapping 隐射到具体的 Action 中, 随后只要有请求就通过 ActionHandler 找到具体的 Action, 因此想要在此基础上实现 RESTful 几乎是不可能, Restful 拦截器的实现也只能通过 forward 来实现, 且无法在 url 中指定参数. 也就是说, 无论你是加自己的过滤器, 甚至创建一个新的注解, 在请求进来时最先经过的 ActionHandler 就以及拒绝了请求, 无法进入到新定义的路由处理中. 因此要实现就只能从 ActionMapping 中入手, 修改路由实现方式.</p>
</li>
</ol>
<p>基本就这样.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/jfinal/" class="post__tag__link">jfinal</a></li><li class="post__tag__item"><a href="/tags/restful/" class="post__tag__link">restful</a></li></ul><a href="/post/jfinal-restful/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-03-03T14:23:18.000Z" class="post__time">March 3, 2017</time><h1 class="post__title"><a href="/post/moan-part-4/">不间断呻吟</a></h1></header><div class="post__main echo"><p>首先, 不要太相信文章的时间, 今天是 2017.03.03, 前一篇早在上个月就已经建好了, 可是一直没有写. 也就是该文创建的前一天, 读完了《甲骨文》, 就我看过之后的感觉还不错, 扒出很多被遗忘的事情, 就是前不久火的《返校》里说的一样, 「是真的忘记了, 还是不愿意想起来」.</p>
<p>该书是何伟著的关于中国三部曲之一, 还有一本《寻路中国》, 已经不打算看了, 就已经拜读的两本书来看, 大致能够明白作者想要表达的事情以及观点, 就事实而言, 现今能有很详细描述近代这些事情的人是很了不起的, 至少如果在我们真的忘记了之后还能有人告诉我们有这些事情发生过.</p>
<p>谈谈最近的事情吧.</p>
<p>算是摆脱了毫无规划的工作上, 但是才刚摆脱又感觉像是踩到了屎堆里. 至少在我来这里之前从未想到会是现在的这种情况, 同期一起的另外一人很萧然的第二天就离去了, 他看出来了这些问题, 在这里对自己的提升是非常有限的, 奈何, 我却无法做出这样的决定, 最大的问题其实还是来自自己, 并没有在早期很好的武装自己, 这也是无奈的选择, 期盼至少不坑.</p>
<p>暂时还没有置办网络, 导致的后果是看书的频率以及耐心远远高出以往.</p>
<p>仍然与以前的自己一样, 无法或者说不能在其他人面前表述自己, 仍然想要营造自己的舒适圈, 弄巧成拙.</p>
<p>一些事情只想自己闷在心里, 细细品味一番, 还真是了不得了, 都已经坚持这么久了.</p>
<p>孤单的最后结果就是 忘记 不想 和其他人接触.</p>
<p>无法对其他人敞开心扉.</p>
<p>永远不能展示最真实的自己.</p>
<p>好吧. 就这样吧, 还能怎么样了? 连自己都无法战胜的人, 如何去战胜其他人. 到底还是要抛弃自己?</p>
<p>记得曾经我说过, 「没有想与不想, 只有愿意与不愿意.」</p>
<blockquote>
<p>「我个人相信他可以撑到世界末日.」 福特说.<br>「是喔.」 亚瑟说. 「那是多久?」<br>「大概十二分钟以后.」福特说. 「来吧, 我得喝一杯.」</p>
</blockquote>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/moan/" class="post__tag__link">moan</a></li></ul><a href="/post/moan-part-4/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-02-21T04:30:02.000Z" class="post__time">February 21, 2017</time><h1 class="post__title"><a href="/post/used-word/">被利用的文字</a></h1></header><div class="post__main echo"><p>中文书写系统经历过无数次的改变, 从最初的象形文字, 到甲骨文, 再到现今的文字书写系统, 以经历了上千年; 包括现今地球上现存的种种文字书写系统也都与中文书写相同类似, 经历了很多的变革, 才形成现今的文字.</p>
<p>但是, 无论是中文的象形文字系统, 或者是罗马字的表意系统文字, 出现的目的都只是被利用而已, 虽然各个时期被利用的目的都不尽相同.</p>
<p>从可考的历史来看, 最初的文字几乎都是象形文字, 使用与原物类似的符号标记为某一件事物, 包括锲型文字以及甲骨文. 当然, 现今已经无法考证文字具体是如何诞生的, 若是从象形文字的初衷来说, 文字应该就只是被利用来记录某些事物而已.</p>
<p>与中文系统不同的是, 锲型文字作为最早出现的象形文字系统, 在后续的发展中并未能像中文一样, 能够完好的保存至今, 而是被表意文字所替代, 究其原因, 并非像进化论所描述的一样, 优剩劣汰, 中文就是一个很好的印证, 没有任何证据能表明, 表意文字优秀于象形文字, 今日, 不难看出, 实际上象形文字因为其字库丰富所能表达出的语境比表意罗马字系统所能表达出更多更丰富的含义, 锲型文字的消失, 究其原因实质上是就是被利用了而已, 被使用罗马字系统的人; 古中亚, 欧洲, 曾出现过强盛的帝国, 这些使用锲型文字的地区都被征服了, 在其统治时期, 文字渐渐发生改变, 以至于后来的人们都忘记的锲型文字该如何书写.</p>
<p>中文系统因为所在区域的关系, 避免了这样的灾难, 从而得到了很好的发展, 并且影响了整个东亚地区, 现今多数东亚地区的文字书写系统或多或少都有受到中文的影响.</p>
<p>日语的出现, 可以说几乎是参考中文实现的, 从日本有文字开始, 最初几乎全部使用汉字作为载体, 但是到了后期因为诸多原因, 才导致了日文的出现, 而最大的目的仍然是利用中文的书写系统早就自己的文字. 在日本近代时期, 曾有计划全部抛弃中文书写系统, 全部使用日文假名, 但是在整改后发现, 其导致文字便的更加复杂, 这种做法也只是利用文字来摆脱与中文的关系.</p>
<p>而韩语, 同样也是因为这种原因, 才出现的书写系统, 现今的韩语最早出现的目的是因为一个被分封的诸侯想要独立, 参照汉字书写造就了自己的文字书写系统.</p>
<p>汉字自身从出现开始就一直不断的被完善, 被改造. 但是无论是某一次的改造的目的都只是被利用而已, 嫌甲骨文书写麻烦, 直到很长时间, 造就了隶书, 为了书写的美观, 造就了楷书, 为了减少汉字的复杂出现了行书; 汉字到目前最后一次大的改动实行简体字, 同样是利用文字而达到一定目的.</p>
<p>文字被创造以及破灭就是人类自身的问题, 当人类有了独立思考的能力之后, 让每个人都有自己的想法, 从而影响着很多事情. 人类有自己的私欲, 导致一切可以被利用的东西都当成了工具. 汉字是这样, 罗马字也是这样.</p>
<p>每一次的文字变革都有其支持者, 也有其反对者, 也真是因为这样才造就了汉字今天的两种版本.</p>
<p>说不上是好或坏, 这是人类社会自身的问题.</p>
<p>就像我在利用文字写这段话一样, 文字的出现就只是被利用.</p>
<p>我可以选择用任何一种文字来写, 当然前提是我得学会怎么去利用文字.</p>
<p>如果你愿意, 你可以利用你会的文字去读 《甲骨文》吧.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/甲骨文/" class="post__tag__link">甲骨文</a></li></ul><a href="/post/used-word/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-02-09T12:49:41.000Z" class="post__time">February 9, 2017</time><h1 class="post__title"><a href="/post/iaceob-come-back/">舊博新開</a></h1></header><div class="post__main echo"><p>算算日子, 恩, 總算是把以前博客給弄好了, 現在重新開放.</p>
<p>這次直接拋棄了 wordpress 直接靜態化成 html 也放入到了 github 中, 與現在的博客放在一起.</p>
<p>關於訪問, 做了一層中間代理, 從日本的服務器訪問 github 做代理到 <code>iaceob.3u3.me</code> 域名去, 同時在這個博客中用 robots 禁止爬蟲抓取當前博客的 <code>/iaceob</code> 目錄.</p>
<p>現博客目錄結構如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── archives</span><br><span class="line">├── CNAME</span><br><span class="line">├── css</span><br><span class="line">├── fonts</span><br><span class="line">├── index.html</span><br><span class="line">├── page</span><br><span class="line">├── post</span><br><span class="line">├── README.md</span><br><span class="line">├── robots.txt</span><br><span class="line">├── sitemap.xml</span><br><span class="line">├── tags</span><br><span class="line">└── iaceob</span><br><span class="line">    ├── archives</span><br><span class="line">    ├── page</span><br><span class="line">    ├── robots.txt</span><br><span class="line">    ├── sitemap.xml</span><br><span class="line">    └── tag</span><br></pre></td></tr></table></figure>
<p>因此, 實際上 <code>blog.3u3.me/iaceob</code> 其實也是可以直接訪問原博客的, 只是在 robots 中禁止了不讓爬蟲去抓取.</p>
<p>這樣 <code>iaceob.3u3.me</code> 就能實現 https 訪問了.</p>
<p>關於 https 訪問, 當前博客也想到了用 https 訪問的方案了, 因為這個博客本身是託管於 github 的, 如果直接用 github 提供的 io 域名訪問, 其實本身就支持 https, 但是, 因為使用了 CNAME 解析, 而 github 的 ssl 無法支持被 CNAME 的域名, 因此無法直接使用 https 訪問.<br>網絡中也搜索過相關問題解決方案, 包括很多另外的第三方再次託管, 瞭解之後發現, 那些第三方實際上就像和爬蟲一樣的東西, 實現的方案其實是將放到 github 的文章再次抓取到第三方的 web 服務中, 而你的域名是交給第三方去實現 ssl 的, 變相的看來, 就是第三方提供了一個支持 ssl 的虛擬空間而已, 且有些服務抓取的還不及時, 換皮不換藥, 還不一定穩定(但不失為一個好辦法).<br>這裡想到的解決方案, 前提是要有一臺自己的服務器(因此其實也算不上是太好的方案, 並不是沒人都有自己的服務器), 且能夠連接到 github , 對, 看來你想到什麼了.<br>其實原理很簡單, 就和我的舊博客一樣, 做一次代理即可, github 中不要使用 CNAME, 將你的域名指向到你的服務器, 然後在 nginx 中對域名進行代理到 github, 然後在 nginx 中實現 ssl, 這樣就完成了, 這樣就不會有不及時的問題, 也完全在自己控制.<br>如果不想要 github.io 的那份博客被搜索引擎抓取, 可直接在 robots 中禁止任何爬蟲抓取, 然後在自己的服務器中攔截 robots 設置 CNAME 的域名想要被抓取的域名, 或者簡單暴力的直接到各個搜索引擎告訴不要抓取那個 io 的域名即可(雖然我不知道搜索引擎有沒有提供這種功能).</p>
<p>最後</p>
<p>關於原博客重開, 樣式其實就是抄的當前用的這個樣式, 然後改了改, 還有文章因為是通過抓取來的, 而不是直接從數據庫中查的, wordpress 的數據表實在太麻煩了, 因此可能會有亂象出現, 不在意就好.</p>
<p>有趣的是, 這次重新弄之前的博客, 以外讓我學會了用 Inkscape, 雖然就只是非常簡單的使用, 重開的博客 <a href="https://iaceob.3u3.me/favicon.svg" target="_blank" rel="external">favicon</a> 就是我自己畫的.</p>
<p>從放棄原博客開始, 說要重新弄, 到現在都已經超過一年了, 時間過的真快, 拖延症也越來越嚴重了.</p>
<p>原博客以後就不會在動了, 就這麼放著吧.</p>
<p>今年的第一件要做的事情完成了.</p>
<p>就這樣.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/iaceob/" class="post__tag__link">iaceob</a></li><li class="post__tag__item"><a href="/tags/blog/" class="post__tag__link">blog</a></li></ul><a href="/post/iaceob-come-back/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-02-03T14:04:24.000Z" class="post__time">February 3, 2017</time><h1 class="post__title"><a href="/post/oracle-election/">《甲骨文》 選舉 節選</a></h1></header><div class="post__main echo"><p>「沒錯，」石磊說：「她不是我的親生母親。我父親的原配 – 我母親 – 是幾年前在大陸去世了， 她沒有來成臺灣。一九四九年時，她不在南京，因為她要照顧她公公。她留了下來，希望我們後來會回去。」<br>街上下起了小雨。現在我明白了，為什麼石教授在回想他是哪一年結婚的時候，不像他回想古文物出土的日期那麼快速。那就是中國的歷史：你記得的事加上你試著要遺忘的事。在等計程車時，他的兒子轉向我。<br>「我比我父親晚一點來臺灣，」他說：「離開大陸之前，我母親讓我轉告父親一個口信。她說：萬一發生什麼事，他們不得不分開，他應該要再婚。我想她已感覺到，國家會走向分裂。」</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/甲骨文/" class="post__tag__link">甲骨文</a></li></ul><a href="/post/oracle-election/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2017-01-27T15:26:15.000Z" class="post__time">January 27, 2017</time><h1 class="post__title"><a href="/post/moan-part-3/">再來呻吟</a></h1></header><div class="post__main echo"><p>嗯.<br>又來發廢文.</p>
<p>最近越來越發現, 喔不, 是真的接近於擺脫低頭族. 也不說這是一件多麼值得慶幸的事情, 反而以目前的狀況而言, 會被很多人覺得是自己格格不入, 但是這種狀態還會繼續下去, 工具應該是你去用它, 而不是讓工具來玩你.</p>
<p>也就是因為這樣, 幾乎和來往過的人都很少有在聯絡, 當然, 這很大一部分也是自己的問題, 可以說的事情越來越少, 走的也越遠, 不過真正在意的並不會就因為這樣而淡化, 就是會有這樣的人 ~</p>
<p>活在現實裡吧.</p>
<p>還有喔, 這個約定應該說已經兌現了, 得有兩年多了吧.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">                                                 PM    AM</span><br><span class="line">| | | | | 22 | | | | | | | | | 23 | | | | | | | | | 00 | | | | | | | | | 01 | | | |</span><br></pre></td></tr></table></figure>
<p>可惜勒, 也只能是我知道了昂  ╮(╯_╰)╭</p>
<p>外面炮竹聲都響起來了.</p>
<p>算了, 就到這裡吧. 平時總是能想到好多, 反而到了要說出來的時候又全都憋回去了.</p>
<p>真是個無聊的人, 對, 就是這個人 ←_← </p>
<p>睡覺吧.</p>
<p>偶然, ↓↓↓↓</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="100%" height="86" src="//music.163.com/outchain/player?type=2&id=32639022&auto=0&height=66"></iframe>

</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/moan/" class="post__tag__link">moan</a></li></ul><a href="/post/moan-part-3/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2017 iaceob</div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><a title="Next" href="/page/2/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>